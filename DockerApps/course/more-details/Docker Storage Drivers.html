<!DOCTYPE html>
<!-- saved from url=(0050)http://static.dockerone.com/ppt/filedriver.html#51 -->
<html class="remark-container"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style type="text/css">html.remark-container,body.remark-container{height:100%;width:100%;}.remark-container{background:#d7d8d2;margin:0;overflow:hidden;}.remark-container:focus{outline-style:solid;outline-width:1px;}:-webkit-full-screen .remark-container{width:100%;height:100%;}.remark-slides-area{position:relative;height:100%;width:100%;}.remark-slide-container{display:none;position:relative;height:100%;width:100%;page-break-after:always;}.remark-slide-scaler{background:#fff;overflow:hidden;position:absolute;-webkit-transform-origin:top left;-moz-transform-origin:top left;transform-origin:top-left;-moz-box-shadow:0 0 30px #888;-webkit-box-shadow:0 0 30px #888;box-shadow:0 0 30px #888;}.remark-slide{height:100%;width:100%;display:table;}.remark-slide>.left{text-align:left;}.remark-slide>.center{text-align:center;}.remark-slide>.right{text-align:right;}.remark-slide>.top{vertical-align:top;}.remark-slide>.middle{vertical-align:middle;}.remark-slide>.bottom{vertical-align:bottom;}.remark-slide .remark-slide-content{background-position:center;background-repeat:no-repeat;display:table-cell;padding:1em 4em 1em 4em;}.remark-slide .remark-slide-content .left{display:block;text-align:left;}.remark-slide .remark-slide-content .center{display:block;text-align:center;}.remark-slide .remark-slide-content .right{display:block;text-align:right;}.remark-slide .remark-slide-number{bottom:12px;opacity:0.5;position:absolute;right:20px;}.remark-visible{display:block;}.remark-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;display:none;opacity:0.95;background:#000;}.remark-help{bottom:0;top:0;right:0;left:0;display:none;position:absolute;z-index:1000;-webkit-transform-origin:top left;-moz-transform-origin:top left;transform-origin:top-left;}.remark-help .remark-help-content{color:white;font-family:Helvetica,arial,freesans,clean,sans-serif;font-size:12pt;position:absolute;top:10%;bottom:10%;left:10%;height:10%;}.remark-help .remark-help-content td{color:white;font-size:12pt;padding:10px;}.remark-help .remark-help-content td:first-child{padding-left:0;}.remark-help .remark-help-content .key{background:white;color:black;min-width:1em;display:inline-block;padding:3px 6px;text-align:center;border-radius:4px;}.remark-help .dismiss{top:85%;}.remark-container.remark-help-mode .remark-help{display:block;}.remark-container.remark-help-mode .remark-backdrop{display:block;}.remark-preview-area{bottom:2%;left:2%;display:none;opacity:0.5;position:absolute;height:47.25%;width:48%;}.remark-preview-area .remark-slide-container{display:block;}.remark-notes-area{background:#e7e8e2;bottom:0;display:none;left:52%;overflow:hidden;padding:1.5em;position:absolute;right:0;top:0;}.remark-toolbar{color:#979892;padding-bottom:1em;}.remark-toolbar .remark-toolbar-link{border:2px solid #d7d8d2;color:#979892;display:inline-block;padding:2px 2px;text-decoration:none;text-align:center;min-width:20px;}.remark-toolbar .remark-toolbar-link:hover{border-color:#979892;color:#676862;}.remark-container.remark-presenter-mode .remark-slides-area{top:2%;left:2%;height:47.25%;width:48%;}.remark-container.remark-presenter-mode .remark-preview-area{display:block;}.remark-container.remark-presenter-mode .remark-notes-area{display:block;}@media print{.remark-container{overflow:visible;} .remark-slide-container{display:block;}}@page {size:908px 681px;margin:0;}.hljs-far{}.hljs-far pre code{display:block;padding:0.5em;background:#000080;}.hljs-far pre code,.hljs-far pre .subst{color:#0FF;}.hljs-far pre .string,.hljs-far pre .ruby .string,.hljs-far pre .haskell .type,.hljs-far pre .tag .value,.hljs-far pre .css .rules .value,.hljs-far pre .css .rules .value .number,.hljs-far pre .preprocessor,.hljs-far pre .ruby .symbol,.hljs-far pre .ruby .symbol .string,.hljs-far pre .built_in,.hljs-far pre .sql .aggregate,.hljs-far pre .django .template_tag,.hljs-far pre .django .variable,.hljs-far pre .smalltalk .class,.hljs-far pre .addition,.hljs-far pre .apache .tag,.hljs-far pre .apache .cbracket,.hljs-far pre .tex .command,.hljs-far pre .clojure .title,.hljs-far pre .coffeescript .attribute{color:#FF0;}.hljs-far pre .keyword,.hljs-far pre .css .id,.hljs-far pre .title,.hljs-far pre .haskell .type,.hljs-far pre .vbscript .built_in,.hljs-far pre .sql .aggregate,.hljs-far pre .rsl .built_in,.hljs-far pre .smalltalk .class,.hljs-far pre .xml .tag .title,.hljs-far pre .winutils,.hljs-far pre .flow,.hljs-far pre .change,.hljs-far pre .envvar,.hljs-far pre .bash .variable,.hljs-far pre .tex .special,.hljs-far pre .clojure .built_in{color:#FFF;}.hljs-far pre .comment,.hljs-far pre .phpdoc,.hljs-far pre .javadoc,.hljs-far pre .java .annotation,.hljs-far pre .template_comment,.hljs-far pre .deletion,.hljs-far pre .apache .sqbracket,.hljs-far pre .tex .formula{color:#888;}.hljs-far pre .number,.hljs-far pre .date,.hljs-far pre .regexp,.hljs-far pre .literal,.hljs-far pre .smalltalk .symbol,.hljs-far pre .smalltalk .char,.hljs-far pre .clojure .attribute{color:#0F0;}.hljs-far pre .python .decorator,.hljs-far pre .django .filter .argument,.hljs-far pre .smalltalk .localvars,.hljs-far pre .smalltalk .array,.hljs-far pre .attr_selector,.hljs-far pre .pseudo,.hljs-far pre .xml .pi,.hljs-far pre .diff .header,.hljs-far pre .chunk,.hljs-far pre .shebang,.hljs-far pre .nginx .built_in,.hljs-far pre .prompt{color:#008080;}.hljs-far pre .keyword,.hljs-far pre .css .id,.hljs-far pre .title,.hljs-far pre .haskell .type,.hljs-far pre .vbscript .built_in,.hljs-far pre .sql .aggregate,.hljs-far pre .rsl .built_in,.hljs-far pre .smalltalk .class,.hljs-far pre .winutils,.hljs-far pre .flow,.hljs-far pre .apache .tag,.hljs-far pre .nginx .built_in,.hljs-far pre .tex .command,.hljs-far pre .tex .special,.hljs-far pre .request,.hljs-far pre .status{font-weight:bold;}.hljs-dark{}.hljs-dark pre code{display:block;padding:0.5em;background:#444;}.hljs-dark pre .keyword,.hljs-dark pre .literal,.hljs-dark pre .change,.hljs-dark pre .winutils,.hljs-dark pre .flow,.hljs-dark pre .lisp .title,.hljs-dark pre .clojure .built_in,.hljs-dark pre .nginx .title,.hljs-dark pre .tex .special{color:white;}.hljs-dark pre code,.hljs-dark pre .subst{color:#DDD;}.hljs-dark pre .string,.hljs-dark pre .title,.hljs-dark pre .haskell .type,.hljs-dark pre .ini .title,.hljs-dark pre .tag .value,.hljs-dark pre .css .rules .value,.hljs-dark pre .preprocessor,.hljs-dark pre .ruby .symbol,.hljs-dark pre .ruby .symbol .string,.hljs-dark pre .ruby .class .parent,.hljs-dark pre .built_in,.hljs-dark pre .sql .aggregate,.hljs-dark pre .django .template_tag,.hljs-dark pre .django .variable,.hljs-dark pre .smalltalk .class,.hljs-dark pre .javadoc,.hljs-dark pre .ruby .string,.hljs-dark pre .django .filter .argument,.hljs-dark pre .smalltalk .localvars,.hljs-dark pre .smalltalk .array,.hljs-dark pre .attr_selector,.hljs-dark pre .pseudo,.hljs-dark pre .addition,.hljs-dark pre .stream,.hljs-dark pre .envvar,.hljs-dark pre .apache .tag,.hljs-dark pre .apache .cbracket,.hljs-dark pre .tex .command,.hljs-dark pre .prompt,.hljs-dark pre .coffeescript .attribute{color:#D88;}.hljs-dark pre .comment,.hljs-dark pre .java .annotation,.hljs-dark pre .python .decorator,.hljs-dark pre .template_comment,.hljs-dark pre .pi,.hljs-dark pre .doctype,.hljs-dark pre .deletion,.hljs-dark pre .shebang,.hljs-dark pre .apache .sqbracket,.hljs-dark pre .tex .formula{color:#777;}.hljs-dark pre .keyword,.hljs-dark pre .literal,.hljs-dark pre .title,.hljs-dark pre .css .id,.hljs-dark pre .phpdoc,.hljs-dark pre .haskell .type,.hljs-dark pre .vbscript .built_in,.hljs-dark pre .sql .aggregate,.hljs-dark pre .rsl .built_in,.hljs-dark pre .smalltalk .class,.hljs-dark pre .diff .header,.hljs-dark pre .chunk,.hljs-dark pre .winutils,.hljs-dark pre .bash .variable,.hljs-dark pre .apache .tag,.hljs-dark pre .tex .special,.hljs-dark pre .request,.hljs-dark pre .status{font-weight:bold;}.hljs-dark pre .coffeescript .javascript,.hljs-dark pre .javascript .xml,.hljs-dark pre .tex .formula,.hljs-dark pre .xml .javascript,.hljs-dark pre .xml .vbscript,.hljs-dark pre .xml .css,.hljs-dark pre .xml .cdata{opacity:0.5;}.hljs-docco{}.hljs-docco pre code{display:block;padding:0.5em;color:#000;background:#f8f8ff;}.hljs-docco pre .comment,.hljs-docco pre .template_comment,.hljs-docco pre .diff .header,.hljs-docco pre .javadoc{color:#408080;font-style:italic;}.hljs-docco pre .keyword,.hljs-docco pre .assignment,.hljs-docco pre .literal,.hljs-docco pre .css .rule .keyword,.hljs-docco pre .winutils,.hljs-docco pre .javascript .title,.hljs-docco pre .lisp .title,.hljs-docco pre .subst{color:#954121;}.hljs-docco pre .number,.hljs-docco pre .hexcolor{color:#40a070;}.hljs-docco pre .string,.hljs-docco pre .tag .value,.hljs-docco pre .phpdoc,.hljs-docco pre .tex .formula{color:#219161;}.hljs-docco pre .title,.hljs-docco pre .id{color:#19469D;}.hljs-docco pre .params{color:#00F;}.hljs-docco pre .javascript .title,.hljs-docco pre .lisp .title,.hljs-docco pre .subst{font-weight:normal;}.hljs-docco pre .class .title,.hljs-docco pre .haskell .label,.hljs-docco pre .tex .command{color:#458;font-weight:bold;}.hljs-docco pre .tag,.hljs-docco pre .tag .title,.hljs-docco pre .rules .property,.hljs-docco pre .django .tag .keyword{color:#000080;font-weight:normal;}.hljs-docco pre .attribute,.hljs-docco pre .variable,.hljs-docco pre .instancevar,.hljs-docco pre .lisp .body{color:#008080;}.hljs-docco pre .regexp{color:#bb6688;}.hljs-docco pre .class{color:#458;font-weight:bold;}.hljs-docco pre .symbol,.hljs-docco pre .ruby .symbol .string,.hljs-docco pre .ruby .symbol .keyword,.hljs-docco pre .ruby .symbol .keymethods,.hljs-docco pre .lisp .keyword,.hljs-docco pre .tex .special,.hljs-docco pre .input_number{color:#990073;}.hljs-docco pre .builtin,.hljs-docco pre .constructor,.hljs-docco pre .built_in,.hljs-docco pre .lisp .title{color:#0086b3;}.hljs-docco pre .preprocessor,.hljs-docco pre .pi,.hljs-docco pre .doctype,.hljs-docco pre .shebang,.hljs-docco pre .cdata{color:#999;font-weight:bold;}.hljs-docco pre .deletion{background:#ffdddd;}.hljs-docco pre .addition{background:#ddffdd;}.hljs-docco pre .diff .change{background:#0086b3;}.hljs-docco pre .chunk{color:#aaaaaa;}.hljs-docco pre .tex .formula{opacity:0.5;}.hljs-ascetic{}.hljs-ascetic pre code{display:block;padding:0.5em;background:white;color:black;}.hljs-ascetic pre .string,.hljs-ascetic pre .tag .value,.hljs-ascetic pre .filter .argument,.hljs-ascetic pre .addition,.hljs-ascetic pre .change,.hljs-ascetic pre .apache .tag,.hljs-ascetic pre .apache .cbracket,.hljs-ascetic pre .nginx .built_in,.hljs-ascetic pre .tex .formula{color:#888;}.hljs-ascetic pre .comment,.hljs-ascetic pre .template_comment,.hljs-ascetic pre .shebang,.hljs-ascetic pre .doctype,.hljs-ascetic pre .pi,.hljs-ascetic pre .javadoc,.hljs-ascetic pre .deletion,.hljs-ascetic pre .apache .sqbracket{color:#CCC;}.hljs-ascetic pre .keyword,.hljs-ascetic pre .tag .title,.hljs-ascetic pre .ini .title,.hljs-ascetic pre .lisp .title,.hljs-ascetic pre .clojure .title,.hljs-ascetic pre .http .title,.hljs-ascetic pre .nginx .title,.hljs-ascetic pre .css .tag,.hljs-ascetic pre .winutils,.hljs-ascetic pre .flow,.hljs-ascetic pre .apache .tag,.hljs-ascetic pre .tex .command,.hljs-ascetic pre .request,.hljs-ascetic pre .status{font-weight:bold;}.hljs-obsidian{}.hljs-obsidian pre code{display:block;padding:0.5em;background:#282B2E;}.hljs-obsidian pre .keyword,.hljs-obsidian pre .literal,.hljs-obsidian pre .change,.hljs-obsidian pre .winutils,.hljs-obsidian pre .flow,.hljs-obsidian pre .lisp .title,.hljs-obsidian pre .clojure .built_in,.hljs-obsidian pre .nginx .title,.hljs-obsidian pre .css .id,.hljs-obsidian pre .tex .special{color:#93C763;}.hljs-obsidian pre .number{color:#FFCD22;}.hljs-obsidian pre code{color:#E0E2E4;}.hljs-obsidian pre .css .tag,.hljs-obsidian pre .css .pseudo{color:#D0D2B5;}.hljs-obsidian pre .attribute,.hljs-obsidian pre code .constant{color:#668BB0;}.hljs-obsidian pre .xml .attribute{color:#B3B689;}.hljs-obsidian pre .xml .tag .value{color:#E8E2B7;}.hljs-obsidian pre .code,.hljs-obsidian pre .class .title,.hljs-obsidian pre .header{color:white;}.hljs-obsidian pre .class,.hljs-obsidian pre .hexcolor{color:#93C763;}.hljs-obsidian pre .regexp{color:#D39745;}.hljs-obsidian pre .at_rule,.hljs-obsidian pre .at_rule .keyword{color:#A082BD;}.hljs-obsidian pre .doctype{color:#557182;}.hljs-obsidian pre .link_url,.hljs-obsidian pre .tag,.hljs-obsidian pre .tag .title,.hljs-obsidian pre .bullet,.hljs-obsidian pre .subst,.hljs-obsidian pre .emphasis,.hljs-obsidian pre .haskell .type,.hljs-obsidian pre .preprocessor,.hljs-obsidian pre .ruby .class .parent,.hljs-obsidian pre .built_in,.hljs-obsidian pre .sql .aggregate,.hljs-obsidian pre .django .template_tag,.hljs-obsidian pre .django .variable,.hljs-obsidian pre .smalltalk .class,.hljs-obsidian pre .javadoc,.hljs-obsidian pre .django .filter .argument,.hljs-obsidian pre .smalltalk .localvars,.hljs-obsidian pre .smalltalk .array,.hljs-obsidian pre .attr_selector,.hljs-obsidian pre .pseudo,.hljs-obsidian pre .addition,.hljs-obsidian pre .stream,.hljs-obsidian pre .envvar,.hljs-obsidian pre .apache .tag,.hljs-obsidian pre .apache .cbracket,.hljs-obsidian pre .tex .command,.hljs-obsidian pre .prompt{color:#8CBBAD;}.hljs-obsidian pre .string{color:#EC7600;}.hljs-obsidian pre .comment,.hljs-obsidian pre .java .annotation,.hljs-obsidian pre .blockquote,.hljs-obsidian pre .horizontal_rule,.hljs-obsidian pre .python .decorator,.hljs-obsidian pre .template_comment,.hljs-obsidian pre .pi,.hljs-obsidian pre .deletion,.hljs-obsidian pre .shebang,.hljs-obsidian pre .apache .sqbracket,.hljs-obsidian pre .tex .formula{color:#818E96;}.hljs-obsidian pre .keyword,.hljs-obsidian pre .literal,.hljs-obsidian pre .css .id,.hljs-obsidian pre .phpdoc,.hljs-obsidian pre .title,.hljs-obsidian pre .header,.hljs-obsidian pre .haskell .type,.hljs-obsidian pre .vbscript .built_in,.hljs-obsidian pre .sql .aggregate,.hljs-obsidian pre .rsl .built_in,.hljs-obsidian pre .smalltalk .class,.hljs-obsidian pre .diff .header,.hljs-obsidian pre .chunk,.hljs-obsidian pre .winutils,.hljs-obsidian pre .bash .variable,.hljs-obsidian pre .apache .tag,.hljs-obsidian pre .tex .special,.hljs-obsidian pre .request,.hljs-obsidian pre .at_rule .keyword,.hljs-obsidian pre .status{font-weight:bold;}.hljs-obsidian pre .coffeescript .javascript,.hljs-obsidian pre .javascript .xml,.hljs-obsidian pre .tex .formula,.hljs-obsidian pre .xml .javascript,.hljs-obsidian pre .xml .vbscript,.hljs-obsidian pre .xml .css,.hljs-obsidian pre .xml .cdata{opacity:0.5;}.hljs-googlecode{}.hljs-googlecode pre code{display:block;padding:0.5em;background:white;color:black;}.hljs-googlecode pre .comment,.hljs-googlecode pre .template_comment,.hljs-googlecode pre .javadoc,.hljs-googlecode pre .comment *{color:#800;}.hljs-googlecode pre .keyword,.hljs-googlecode pre .method,.hljs-googlecode pre .list .title,.hljs-googlecode pre .clojure .built_in,.hljs-googlecode pre .nginx .title,.hljs-googlecode pre .tag .title,.hljs-googlecode pre .setting .value,.hljs-googlecode pre .winutils,.hljs-googlecode pre .tex .command,.hljs-googlecode pre .http .title,.hljs-googlecode pre .request,.hljs-googlecode pre .status{color:#008;}.hljs-googlecode pre .envvar,.hljs-googlecode pre .tex .special{color:#660;}.hljs-googlecode pre .string,.hljs-googlecode pre .tag .value,.hljs-googlecode pre .cdata,.hljs-googlecode pre .filter .argument,.hljs-googlecode pre .attr_selector,.hljs-googlecode pre .apache .cbracket,.hljs-googlecode pre .date,.hljs-googlecode pre .regexp,.hljs-googlecode pre .coffeescript .attribute{color:#080;}.hljs-googlecode pre .sub .identifier,.hljs-googlecode pre .pi,.hljs-googlecode pre .tag,.hljs-googlecode pre .tag .keyword,.hljs-googlecode pre .decorator,.hljs-googlecode pre .ini .title,.hljs-googlecode pre .shebang,.hljs-googlecode pre .prompt,.hljs-googlecode pre .hexcolor,.hljs-googlecode pre .rules .value,.hljs-googlecode pre .css .value .number,.hljs-googlecode pre .literal,.hljs-googlecode pre .symbol,.hljs-googlecode pre .ruby .symbol .string,.hljs-googlecode pre .number,.hljs-googlecode pre .css .function,.hljs-googlecode pre .clojure .attribute{color:#066;}.hljs-googlecode pre .class .title,.hljs-googlecode pre .haskell .type,.hljs-googlecode pre .smalltalk .class,.hljs-googlecode pre .javadoctag,.hljs-googlecode pre .yardoctag,.hljs-googlecode pre .phpdoc,.hljs-googlecode pre .typename,.hljs-googlecode pre .tag .attribute,.hljs-googlecode pre .doctype,.hljs-googlecode pre .class .id,.hljs-googlecode pre .built_in,.hljs-googlecode pre .setting,.hljs-googlecode pre .params,.hljs-googlecode pre .variable,.hljs-googlecode pre .clojure .title{color:#606;}.hljs-googlecode pre .css .tag,.hljs-googlecode pre .rules .property,.hljs-googlecode pre .pseudo,.hljs-googlecode pre .subst{color:#000;}.hljs-googlecode pre .css .class,.hljs-googlecode pre .css .id{color:#9B703F;}.hljs-googlecode pre .value .important{color:#ff7700;font-weight:bold;}.hljs-googlecode pre .rules .keyword{color:#C5AF75;}.hljs-googlecode pre .annotation,.hljs-googlecode pre .apache .sqbracket,.hljs-googlecode pre .nginx .built_in{color:#9B859D;}.hljs-googlecode pre .preprocessor,.hljs-googlecode pre .preprocessor *{color:#444;}.hljs-googlecode pre .tex .formula{background-color:#EEE;font-style:italic;}.hljs-googlecode pre .diff .header,.hljs-googlecode pre .chunk{color:#808080;font-weight:bold;}.hljs-googlecode pre .diff .change{background-color:#BCCFF9;}.hljs-googlecode pre .addition{background-color:#BAEEBA;}.hljs-googlecode pre .deletion{background-color:#FFC8BD;}.hljs-googlecode pre .comment .yardoctag{font-weight:bold;}.hljs-solarized_light{}.hljs-solarized_light pre code{display:block;padding:0.5em;background:#fdf6e3;color:#657b83;}.hljs-solarized_light pre .comment,.hljs-solarized_light pre .template_comment,.hljs-solarized_light pre .diff .header,.hljs-solarized_light pre .doctype,.hljs-solarized_light pre .pi,.hljs-solarized_light pre .lisp .string,.hljs-solarized_light pre .javadoc{color:#93a1a1;font-style:italic;}.hljs-solarized_light pre .keyword,.hljs-solarized_light pre .winutils,.hljs-solarized_light pre .method,.hljs-solarized_light pre .addition,.hljs-solarized_light pre .css .tag,.hljs-solarized_light pre .request,.hljs-solarized_light pre .status,.hljs-solarized_light pre .nginx .title{color:#859900;}.hljs-solarized_light pre .number,.hljs-solarized_light pre .command,.hljs-solarized_light pre .string,.hljs-solarized_light pre .tag .value,.hljs-solarized_light pre .rules .value,.hljs-solarized_light pre .phpdoc,.hljs-solarized_light pre .tex .formula,.hljs-solarized_light pre .regexp,.hljs-solarized_light pre .hexcolor{color:#2aa198;}.hljs-solarized_light pre .title,.hljs-solarized_light pre .localvars,.hljs-solarized_light pre .chunk,.hljs-solarized_light pre .decorator,.hljs-solarized_light pre .built_in,.hljs-solarized_light pre .identifier,.hljs-solarized_light pre .vhdl .literal,.hljs-solarized_light pre .id,.hljs-solarized_light pre .css .function{color:#268bd2;}.hljs-solarized_light pre .attribute,.hljs-solarized_light pre .variable,.hljs-solarized_light pre .lisp .body,.hljs-solarized_light pre .smalltalk .number,.hljs-solarized_light pre .constant,.hljs-solarized_light pre .class .title,.hljs-solarized_light pre .parent,.hljs-solarized_light pre .haskell .type{color:#b58900;}.hljs-solarized_light pre .preprocessor,.hljs-solarized_light pre .preprocessor .keyword,.hljs-solarized_light pre .shebang,.hljs-solarized_light pre .symbol,.hljs-solarized_light pre .symbol .string,.hljs-solarized_light pre .diff .change,.hljs-solarized_light pre .special,.hljs-solarized_light pre .attr_selector,.hljs-solarized_light pre .important,.hljs-solarized_light pre .subst,.hljs-solarized_light pre .cdata,.hljs-solarized_light pre .clojure .title,.hljs-solarized_light pre .css .pseudo{color:#cb4b16;}.hljs-solarized_light pre .deletion{color:#dc322f;}.hljs-solarized_light pre .tex .formula{background:#eee8d5;}.hljs-mono-blue{}.hljs-mono-blue pre code{display:block;padding:0.5em;background:#EAEEF3;color:#00193A;}.hljs-mono-blue pre .keyword,.hljs-mono-blue pre .title,.hljs-mono-blue pre .important,.hljs-mono-blue pre .request,.hljs-mono-blue pre .header{font-weight:bold;}.hljs-mono-blue pre .comment,.hljs-mono-blue pre .chunk,.hljs-mono-blue pre .template_comment{color:#738191;}.hljs-mono-blue pre .string,.hljs-mono-blue pre .title,.hljs-mono-blue pre .parent,.hljs-mono-blue pre .built_in,.hljs-mono-blue pre .literal,.hljs-mono-blue pre .filename,.hljs-mono-blue pre .value,.hljs-mono-blue pre .addition,.hljs-mono-blue pre .tag,.hljs-mono-blue pre .argument,.hljs-mono-blue pre .link_label,.hljs-mono-blue pre .blockquote,.hljs-mono-blue pre .header{color:#0048AB;}.hljs-mono-blue pre .decorator,.hljs-mono-blue pre .prompt,.hljs-mono-blue pre .yardoctag,.hljs-mono-blue pre .subst,.hljs-mono-blue pre .symbol,.hljs-mono-blue pre .doctype,.hljs-mono-blue pre .regexp,.hljs-mono-blue pre .preprocessor,.hljs-mono-blue pre .pi,.hljs-mono-blue pre .attribute,.hljs-mono-blue pre .attr_selector,.hljs-mono-blue pre .javadoc,.hljs-mono-blue pre .xmlDocTag,.hljs-mono-blue pre .deletion,.hljs-mono-blue pre .shebang,.hljs-mono-blue pre .string .variable,.hljs-mono-blue pre .link_url,.hljs-mono-blue pre .bullet{color:#4C81C9;}.hljs-github{}.hljs-github pre code{display:block;padding:0.5em;color:#333;background:#f8f8ff;}.hljs-github pre .comment,.hljs-github pre .template_comment,.hljs-github pre .diff .header,.hljs-github pre .javadoc{color:#998;font-style:italic;}.hljs-github pre .keyword,.hljs-github pre .css .rule .keyword,.hljs-github pre .winutils,.hljs-github pre .javascript .title,.hljs-github pre .nginx .title,.hljs-github pre .subst,.hljs-github pre .request,.hljs-github pre .status{color:#333;font-weight:bold;}.hljs-github pre .number,.hljs-github pre .hexcolor,.hljs-github pre .ruby .constant{color:#099;}.hljs-github pre .string,.hljs-github pre .tag .value,.hljs-github pre .phpdoc,.hljs-github pre .tex .formula{color:#dd1144;}.hljs-github pre .title,.hljs-github pre .id,.hljs-github pre .coffeescript .params,.hljs-github pre .scss .preprocessor{color:#900;font-weight:bold;}.hljs-github pre .javascript .title,.hljs-github pre .lisp .title,.hljs-github pre .clojure .title,.hljs-github pre .subst{font-weight:normal;}.hljs-github pre .class .title,.hljs-github pre .haskell .type,.hljs-github pre .vhdl .literal,.hljs-github pre .tex .command{color:#458;font-weight:bold;}.hljs-github pre .tag,.hljs-github pre .tag .title,.hljs-github pre .rules .property,.hljs-github pre .django .tag .keyword{color:#000080;font-weight:normal;}.hljs-github pre .attribute,.hljs-github pre .variable,.hljs-github pre .lisp .body{color:#008080;}.hljs-github pre .regexp{color:#009926;}.hljs-github pre .class{color:#458;font-weight:bold;}.hljs-github pre .symbol,.hljs-github pre .ruby .symbol .string,.hljs-github pre .lisp .keyword,.hljs-github pre .tex .special,.hljs-github pre .prompt{color:#990073;}.hljs-github pre .built_in,.hljs-github pre .lisp .title,.hljs-github pre .clojure .built_in{color:#0086b3;}.hljs-github pre .preprocessor,.hljs-github pre .pi,.hljs-github pre .doctype,.hljs-github pre .shebang,.hljs-github pre .cdata{color:#999;font-weight:bold;}.hljs-github pre .deletion{background:#ffdddd;}.hljs-github pre .addition{background:#ddffdd;}.hljs-github pre .diff .change{background:#0086b3;}.hljs-github pre .chunk{color:#aaaaaa;}.hljs-tomorrow-night{}.hljs-tomorrow-night .tomorrow-comment,.hljs-tomorrow-night pre .comment,.hljs-tomorrow-night pre .title{color:#969896;}.hljs-tomorrow-night .tomorrow-red,.hljs-tomorrow-night pre .variable,.hljs-tomorrow-night pre .attribute,.hljs-tomorrow-night pre .tag,.hljs-tomorrow-night pre .regexp,.hljs-tomorrow-night pre .ruby .constant,.hljs-tomorrow-night pre .xml .tag .title,.hljs-tomorrow-night pre .xml .pi,.hljs-tomorrow-night pre .xml .doctype,.hljs-tomorrow-night pre .html .doctype,.hljs-tomorrow-night pre .css .id,.hljs-tomorrow-night pre .css .class,.hljs-tomorrow-night pre .css .pseudo{color:#cc6666;}.hljs-tomorrow-night .tomorrow-orange,.hljs-tomorrow-night pre .number,.hljs-tomorrow-night pre .preprocessor,.hljs-tomorrow-night pre .built_in,.hljs-tomorrow-night pre .literal,.hljs-tomorrow-night pre .params,.hljs-tomorrow-night pre .constant{color:#de935f;}.hljs-tomorrow-night .tomorrow-yellow,.hljs-tomorrow-night pre .ruby .class .title,.hljs-tomorrow-night pre .css .rules .attribute{color:#f0c674;}.hljs-tomorrow-night .tomorrow-green,.hljs-tomorrow-night pre .string,.hljs-tomorrow-night pre .value,.hljs-tomorrow-night pre .inheritance,.hljs-tomorrow-night pre .header,.hljs-tomorrow-night pre .ruby .symbol,.hljs-tomorrow-night pre .xml .cdata{color:#b5bd68;}.hljs-tomorrow-night .tomorrow-aqua,.hljs-tomorrow-night pre .css .hexcolor{color:#8abeb7;}.hljs-tomorrow-night .tomorrow-blue,.hljs-tomorrow-night pre .function,.hljs-tomorrow-night pre .python .decorator,.hljs-tomorrow-night pre .python .title,.hljs-tomorrow-night pre .ruby .function .title,.hljs-tomorrow-night pre .ruby .title .keyword,.hljs-tomorrow-night pre .perl .sub,.hljs-tomorrow-night pre .javascript .title,.hljs-tomorrow-night pre .coffeescript .title{color:#81a2be;}.hljs-tomorrow-night .tomorrow-purple,.hljs-tomorrow-night pre .keyword,.hljs-tomorrow-night pre .javascript .function{color:#b294bb;}.hljs-tomorrow-night pre code{display:block;background:#1d1f21;color:#c5c8c6;padding:0.5em;}.hljs-tomorrow-night pre .coffeescript .javascript,.hljs-tomorrow-night pre .javascript .xml,.hljs-tomorrow-night pre .tex .formula,.hljs-tomorrow-night pre .xml .javascript,.hljs-tomorrow-night pre .xml .vbscript,.hljs-tomorrow-night pre .xml .css,.hljs-tomorrow-night pre .xml .cdata{opacity:0.5;}.hljs-solarized_dark{}.hljs-solarized_dark pre code{display:block;padding:0.5em;background:#002b36;color:#839496;}.hljs-solarized_dark pre .comment,.hljs-solarized_dark pre .template_comment,.hljs-solarized_dark pre .diff .header,.hljs-solarized_dark pre .doctype,.hljs-solarized_dark pre .pi,.hljs-solarized_dark pre .lisp .string,.hljs-solarized_dark pre .javadoc{color:#586e75;font-style:italic;}.hljs-solarized_dark pre .keyword,.hljs-solarized_dark pre .winutils,.hljs-solarized_dark pre .method,.hljs-solarized_dark pre .addition,.hljs-solarized_dark pre .css .tag,.hljs-solarized_dark pre .request,.hljs-solarized_dark pre .status,.hljs-solarized_dark pre .nginx .title{color:#859900;}.hljs-solarized_dark pre .number,.hljs-solarized_dark pre .command,.hljs-solarized_dark pre .string,.hljs-solarized_dark pre .tag .value,.hljs-solarized_dark pre .rules .value,.hljs-solarized_dark pre .phpdoc,.hljs-solarized_dark pre .tex .formula,.hljs-solarized_dark pre .regexp,.hljs-solarized_dark pre .hexcolor{color:#2aa198;}.hljs-solarized_dark pre .title,.hljs-solarized_dark pre .localvars,.hljs-solarized_dark pre .chunk,.hljs-solarized_dark pre .decorator,.hljs-solarized_dark pre .built_in,.hljs-solarized_dark pre .identifier,.hljs-solarized_dark pre .vhdl .literal,.hljs-solarized_dark pre .id,.hljs-solarized_dark pre .css .function{color:#268bd2;}.hljs-solarized_dark pre .attribute,.hljs-solarized_dark pre .variable,.hljs-solarized_dark pre .lisp .body,.hljs-solarized_dark pre .smalltalk .number,.hljs-solarized_dark pre .constant,.hljs-solarized_dark pre .class .title,.hljs-solarized_dark pre .parent,.hljs-solarized_dark pre .haskell .type{color:#b58900;}.hljs-solarized_dark pre .preprocessor,.hljs-solarized_dark pre .preprocessor .keyword,.hljs-solarized_dark pre .shebang,.hljs-solarized_dark pre .symbol,.hljs-solarized_dark pre .symbol .string,.hljs-solarized_dark pre .diff .change,.hljs-solarized_dark pre .special,.hljs-solarized_dark pre .attr_selector,.hljs-solarized_dark pre .important,.hljs-solarized_dark pre .subst,.hljs-solarized_dark pre .cdata,.hljs-solarized_dark pre .clojure .title,.hljs-solarized_dark pre .css .pseudo{color:#cb4b16;}.hljs-solarized_dark pre .deletion{color:#dc322f;}.hljs-solarized_dark pre .tex .formula{background:#073642;}.hljs-foundation{}.hljs-foundation pre code{display:block;padding:0.5em;background:#eee;}.hljs-foundation pre .decorator,.hljs-foundation pre .annotation{color:#000077;}.hljs-foundation pre .attribute{color:#070;}.hljs-foundation pre .value,.hljs-foundation pre .string,.hljs-foundation pre .scss .value .string{color:#d14;}.hljs-foundation pre .comment{color:#998;font-style:italic;}.hljs-foundation pre .function .title{color:#900;}.hljs-foundation pre .class{color:#458;}.hljs-foundation pre .id,.hljs-foundation pre .pseudo,.hljs-foundation pre .constant,.hljs-foundation pre .hexcolor{color:teal;}.hljs-foundation pre .variable{color:#336699;}.hljs-foundation pre .javadoc{color:#997700;}.hljs-foundation pre .pi,.hljs-foundation pre .doctype{color:#3344bb;}.hljs-foundation pre .number{color:#099;}.hljs-foundation pre .important{color:#f00;}.hljs-foundation pre .label{color:#970;}.hljs-foundation pre .preprocessor{color:#579;}.hljs-foundation pre .reserved,.hljs-foundation pre .keyword,.hljs-foundation pre .scss .value{color:#000;}.hljs-foundation pre .regexp{background-color:#fff0ff;color:#880088;}.hljs-foundation pre .symbol{color:#990073;}.hljs-foundation pre .symbol .string{color:#a60;}.hljs-foundation pre .tag{color:#007700;}.hljs-foundation pre .at_rule,.hljs-foundation pre .at_rule .keyword{color:#088;}.hljs-foundation pre .at_rule .preprocessor{color:#808;}.hljs-foundation pre .scss .tag,.hljs-foundation pre .scss .attribute{color:#339;}.hljs-vs{}.hljs-vs pre code{display:block;padding:0.5em;}.hljs-vs pre .comment,.hljs-vs pre .annotation,.hljs-vs pre .template_comment,.hljs-vs pre .diff .header,.hljs-vs pre .chunk,.hljs-vs pre .apache .cbracket{color:#008000;}.hljs-vs pre .keyword,.hljs-vs pre .id,.hljs-vs pre .built_in,.hljs-vs pre .smalltalk .class,.hljs-vs pre .winutils,.hljs-vs pre .bash .variable,.hljs-vs pre .tex .command,.hljs-vs pre .request,.hljs-vs pre .status,.hljs-vs pre .nginx .title,.hljs-vs pre .xml .tag,.hljs-vs pre .xml .tag .value{color:#0000ff;}.hljs-vs pre .string,.hljs-vs pre .title,.hljs-vs pre .parent,.hljs-vs pre .tag .value,.hljs-vs pre .rules .value,.hljs-vs pre .rules .value .number,.hljs-vs pre .ruby .symbol,.hljs-vs pre .ruby .symbol .string,.hljs-vs pre .aggregate,.hljs-vs pre .template_tag,.hljs-vs pre .django .variable,.hljs-vs pre .addition,.hljs-vs pre .flow,.hljs-vs pre .stream,.hljs-vs pre .apache .tag,.hljs-vs pre .date,.hljs-vs pre .tex .formula,.hljs-vs pre .coffeescript .attribute{color:#a31515;}.hljs-vs pre .ruby .string,.hljs-vs pre .decorator,.hljs-vs pre .filter .argument,.hljs-vs pre .localvars,.hljs-vs pre .array,.hljs-vs pre .attr_selector,.hljs-vs pre .pseudo,.hljs-vs pre .pi,.hljs-vs pre .doctype,.hljs-vs pre .deletion,.hljs-vs pre .envvar,.hljs-vs pre .shebang,.hljs-vs pre .preprocessor,.hljs-vs pre .userType,.hljs-vs pre .apache .sqbracket,.hljs-vs pre .nginx .built_in,.hljs-vs pre .tex .special,.hljs-vs pre .prompt{color:#2b91af;}.hljs-vs pre .phpdoc,.hljs-vs pre .javadoc,.hljs-vs pre .xmlDocTag{color:#808080;}.hljs-vs pre .vhdl .typename{font-weight:bold;}.hljs-vs pre .vhdl .string{color:#666666;}.hljs-vs pre .vhdl .literal{color:#a31515;}.hljs-vs pre .vhdl .attribute{color:#00B0E8;}.hljs-vs pre .xml .attribute{color:#ff0000;}.hljs-sunburst{}.hljs-sunburst pre code{display:block;padding:0.5em;background:#000;color:#f8f8f8;}.hljs-sunburst pre .comment,.hljs-sunburst pre .template_comment,.hljs-sunburst pre .javadoc{color:#aeaeae;font-style:italic;}.hljs-sunburst pre .keyword,.hljs-sunburst pre .ruby .function .keyword,.hljs-sunburst pre .request,.hljs-sunburst pre .status,.hljs-sunburst pre .nginx .title{color:#E28964;}.hljs-sunburst pre .function .keyword,.hljs-sunburst pre .sub .keyword,.hljs-sunburst pre .method,.hljs-sunburst pre .list .title{color:#99CF50;}.hljs-sunburst pre .string,.hljs-sunburst pre .tag .value,.hljs-sunburst pre .cdata,.hljs-sunburst pre .filter .argument,.hljs-sunburst pre .attr_selector,.hljs-sunburst pre .apache .cbracket,.hljs-sunburst pre .date,.hljs-sunburst pre .tex .command,.hljs-sunburst pre .coffeescript .attribute{color:#65B042;}.hljs-sunburst pre .subst{color:#DAEFA3;}.hljs-sunburst pre .regexp{color:#E9C062;}.hljs-sunburst pre .title,.hljs-sunburst pre .sub .identifier,.hljs-sunburst pre .pi,.hljs-sunburst pre .tag,.hljs-sunburst pre .tag .keyword,.hljs-sunburst pre .decorator,.hljs-sunburst pre .shebang,.hljs-sunburst pre .prompt{color:#89BDFF;}.hljs-sunburst pre .class .title,.hljs-sunburst pre .haskell .type,.hljs-sunburst pre .smalltalk .class,.hljs-sunburst pre .javadoctag,.hljs-sunburst pre .yardoctag,.hljs-sunburst pre .phpdoc{text-decoration:underline;}.hljs-sunburst pre .symbol,.hljs-sunburst pre .ruby .symbol .string,.hljs-sunburst pre .number{color:#3387CC;}.hljs-sunburst pre .params,.hljs-sunburst pre .variable,.hljs-sunburst pre .clojure .attribute{color:#3E87E3;}.hljs-sunburst pre .css .tag,.hljs-sunburst pre .rules .property,.hljs-sunburst pre .pseudo,.hljs-sunburst pre .tex .special{color:#CDA869;}.hljs-sunburst pre .css .class{color:#9B703F;}.hljs-sunburst pre .rules .keyword{color:#C5AF75;}.hljs-sunburst pre .rules .value{color:#CF6A4C;}.hljs-sunburst pre .css .id{color:#8B98AB;}.hljs-sunburst pre .annotation,.hljs-sunburst pre .apache .sqbracket,.hljs-sunburst pre .nginx .built_in{color:#9B859D;}.hljs-sunburst pre .preprocessor{color:#8996A8;}.hljs-sunburst pre .hexcolor,.hljs-sunburst pre .css .value .number{color:#DD7B3B;}.hljs-sunburst pre .css .function{color:#DAD085;}.hljs-sunburst pre .diff .header,.hljs-sunburst pre .chunk,.hljs-sunburst pre .tex .formula{background-color:#0E2231;color:#F8F8F8;font-style:italic;}.hljs-sunburst pre .diff .change{background-color:#4A410D;color:#F8F8F8;}.hljs-sunburst pre .addition{background-color:#253B22;color:#F8F8F8;}.hljs-sunburst pre .deletion{background-color:#420E09;color:#F8F8F8;}.hljs-sunburst pre .coffeescript .javascript,.hljs-sunburst pre .javascript .xml,.hljs-sunburst pre .tex .formula,.hljs-sunburst pre .xml .javascript,.hljs-sunburst pre .xml .vbscript,.hljs-sunburst pre .xml .css,.hljs-sunburst pre .xml .cdata{opacity:0.5;}.hljs-arta{}.hljs-arta pre code{display:block;padding:0.5em;background:#222;}.hljs-arta pre .profile .header *,.hljs-arta pre .ini .title,.hljs-arta pre .nginx .title{color:#fff;}.hljs-arta pre .comment,.hljs-arta pre .javadoc,.hljs-arta pre .preprocessor,.hljs-arta pre .preprocessor .title,.hljs-arta pre .shebang,.hljs-arta pre .profile .summary,.hljs-arta pre .diff,.hljs-arta pre .pi,.hljs-arta pre .doctype,.hljs-arta pre .tag,.hljs-arta pre .template_comment,.hljs-arta pre .css .rules,.hljs-arta pre .tex .special{color:#444;}.hljs-arta pre .string,.hljs-arta pre .symbol,.hljs-arta pre .diff .change,.hljs-arta pre .regexp,.hljs-arta pre .xml .attribute,.hljs-arta pre .smalltalk .char,.hljs-arta pre .xml .value,.hljs-arta pre .ini .value,.hljs-arta pre .clojure .attribute,.hljs-arta pre .coffeescript .attribute{color:#ffcc33;}.hljs-arta pre .number,.hljs-arta pre .addition{color:#00cc66;}.hljs-arta pre .built_in,.hljs-arta pre .literal,.hljs-arta pre .vhdl .typename,.hljs-arta pre .go .constant,.hljs-arta pre .go .typename,.hljs-arta pre .ini .keyword,.hljs-arta pre .lua .title,.hljs-arta pre .perl .variable,.hljs-arta pre .php .variable,.hljs-arta pre .mel .variable,.hljs-arta pre .django .variable,.hljs-arta pre .css .funtion,.hljs-arta pre .smalltalk .method,.hljs-arta pre .hexcolor,.hljs-arta pre .important,.hljs-arta pre .flow,.hljs-arta pre .inheritance,.hljs-arta pre .parser3 .variable{color:#32AAEE;}.hljs-arta pre .keyword,.hljs-arta pre .tag .title,.hljs-arta pre .css .tag,.hljs-arta pre .css .class,.hljs-arta pre .css .id,.hljs-arta pre .css .pseudo,.hljs-arta pre .css .attr_selector,.hljs-arta pre .lisp .title,.hljs-arta pre .clojure .built_in,.hljs-arta pre .winutils,.hljs-arta pre .tex .command,.hljs-arta pre .request,.hljs-arta pre .status{color:#6644aa;}.hljs-arta pre .title,.hljs-arta pre .ruby .constant,.hljs-arta pre .vala .constant,.hljs-arta pre .parent,.hljs-arta pre .deletion,.hljs-arta pre .template_tag,.hljs-arta pre .css .keyword,.hljs-arta pre .objectivec .class .id,.hljs-arta pre .smalltalk .class,.hljs-arta pre .lisp .keyword,.hljs-arta pre .apache .tag,.hljs-arta pre .nginx .variable,.hljs-arta pre .envvar,.hljs-arta pre .bash .variable,.hljs-arta pre .go .built_in,.hljs-arta pre .vbscript .built_in,.hljs-arta pre .lua .built_in,.hljs-arta pre .rsl .built_in,.hljs-arta pre .tail,.hljs-arta pre .avrasm .label,.hljs-arta pre .tex .formula,.hljs-arta pre .tex .formula *{color:#bb1166;}.hljs-arta pre .yardoctag,.hljs-arta pre .phpdoc,.hljs-arta pre .profile .header,.hljs-arta pre .ini .title,.hljs-arta pre .apache .tag,.hljs-arta pre .parser3 .title{font-weight:bold;}.hljs-arta pre .coffeescript .javascript,.hljs-arta pre .javascript .xml,.hljs-arta pre .tex .formula,.hljs-arta pre .xml .javascript,.hljs-arta pre .xml .vbscript,.hljs-arta pre .xml .css,.hljs-arta pre .xml .cdata{opacity:0.6;}.hljs-arta pre code,.hljs-arta pre .javascript,.hljs-arta pre .css,.hljs-arta pre .xml,.hljs-arta pre .subst,.hljs-arta pre .diff .chunk,.hljs-arta pre .css .value,.hljs-arta pre .css .attribute,.hljs-arta pre .lisp .string,.hljs-arta pre .lisp .number,.hljs-arta pre .tail .params,.hljs-arta pre .container,.hljs-arta pre .haskell *,.hljs-arta pre .erlang *,.hljs-arta pre .erlang_repl *{color:#aaa;}.hljs-tomorrow-night-eighties{}.hljs-tomorrow-night-eighties .tomorrow-comment,.hljs-tomorrow-night-eighties pre .comment,.hljs-tomorrow-night-eighties pre .title{color:#999999;}.hljs-tomorrow-night-eighties .tomorrow-red,.hljs-tomorrow-night-eighties pre .variable,.hljs-tomorrow-night-eighties pre .attribute,.hljs-tomorrow-night-eighties pre .tag,.hljs-tomorrow-night-eighties pre .regexp,.hljs-tomorrow-night-eighties pre .ruby .constant,.hljs-tomorrow-night-eighties pre .xml .tag .title,.hljs-tomorrow-night-eighties pre .xml .pi,.hljs-tomorrow-night-eighties pre .xml .doctype,.hljs-tomorrow-night-eighties pre .html .doctype,.hljs-tomorrow-night-eighties pre .css .id,.hljs-tomorrow-night-eighties pre .css .class,.hljs-tomorrow-night-eighties pre .css .pseudo{color:#f2777a;}.hljs-tomorrow-night-eighties .tomorrow-orange,.hljs-tomorrow-night-eighties pre .number,.hljs-tomorrow-night-eighties pre .preprocessor,.hljs-tomorrow-night-eighties pre .built_in,.hljs-tomorrow-night-eighties pre .literal,.hljs-tomorrow-night-eighties pre .params,.hljs-tomorrow-night-eighties pre .constant{color:#f99157;}.hljs-tomorrow-night-eighties .tomorrow-yellow,.hljs-tomorrow-night-eighties pre .ruby .class .title,.hljs-tomorrow-night-eighties pre .css .rules .attribute{color:#ffcc66;}.hljs-tomorrow-night-eighties .tomorrow-green,.hljs-tomorrow-night-eighties pre .string,.hljs-tomorrow-night-eighties pre .value,.hljs-tomorrow-night-eighties pre .inheritance,.hljs-tomorrow-night-eighties pre .header,.hljs-tomorrow-night-eighties pre .ruby .symbol,.hljs-tomorrow-night-eighties pre .xml .cdata{color:#99cc99;}.hljs-tomorrow-night-eighties .tomorrow-aqua,.hljs-tomorrow-night-eighties pre .css .hexcolor{color:#66cccc;}.hljs-tomorrow-night-eighties .tomorrow-blue,.hljs-tomorrow-night-eighties pre .function,.hljs-tomorrow-night-eighties pre .python .decorator,.hljs-tomorrow-night-eighties pre .python .title,.hljs-tomorrow-night-eighties pre .ruby .function .title,.hljs-tomorrow-night-eighties pre .ruby .title .keyword,.hljs-tomorrow-night-eighties pre .perl .sub,.hljs-tomorrow-night-eighties pre .javascript .title,.hljs-tomorrow-night-eighties pre .coffeescript .title{color:#6699cc;}.hljs-tomorrow-night-eighties .tomorrow-purple,.hljs-tomorrow-night-eighties pre .keyword,.hljs-tomorrow-night-eighties pre .javascript .function{color:#cc99cc;}.hljs-tomorrow-night-eighties pre code{display:block;background:#2d2d2d;color:#cccccc;padding:0.5em;}.hljs-tomorrow-night-eighties pre .coffeescript .javascript,.hljs-tomorrow-night-eighties pre .javascript .xml,.hljs-tomorrow-night-eighties pre .tex .formula,.hljs-tomorrow-night-eighties pre .xml .javascript,.hljs-tomorrow-night-eighties pre .xml .vbscript,.hljs-tomorrow-night-eighties pre .xml .css,.hljs-tomorrow-night-eighties pre .xml .cdata{opacity:0.5;}.hljs-default{}.hljs-default pre code{display:block;padding:0.5em;background:#F0F0F0;}.hljs-default pre code,.hljs-default pre .subst,.hljs-default pre .tag .title,.hljs-default pre .lisp .title,.hljs-default pre .clojure .built_in,.hljs-default pre .nginx .title{color:black;}.hljs-default pre .string,.hljs-default pre .title,.hljs-default pre .constant,.hljs-default pre .parent,.hljs-default pre .tag .value,.hljs-default pre .rules .value,.hljs-default pre .rules .value .number,.hljs-default pre .preprocessor,.hljs-default pre .haml .symbol,.hljs-default pre .ruby .symbol,.hljs-default pre .ruby .symbol .string,.hljs-default pre .aggregate,.hljs-default pre .template_tag,.hljs-default pre .django .variable,.hljs-default pre .smalltalk .class,.hljs-default pre .addition,.hljs-default pre .flow,.hljs-default pre .stream,.hljs-default pre .bash .variable,.hljs-default pre .apache .tag,.hljs-default pre .apache .cbracket,.hljs-default pre .tex .command,.hljs-default pre .tex .special,.hljs-default pre .erlang_repl .function_or_atom,.hljs-default pre .asciidoc .header,.hljs-default pre .markdown .header,.hljs-default pre .coffeescript .attribute{color:#800;}.hljs-default pre .comment,.hljs-default pre .annotation,.hljs-default pre .template_comment,.hljs-default pre .diff .header,.hljs-default pre .chunk,.hljs-default pre .asciidoc .blockquote,.hljs-default pre .markdown .blockquote{color:#888;}.hljs-default pre .number,.hljs-default pre .date,.hljs-default pre .regexp,.hljs-default pre .literal,.hljs-default pre .hexcolor,.hljs-default pre .smalltalk .symbol,.hljs-default pre .smalltalk .char,.hljs-default pre .go .constant,.hljs-default pre .change,.hljs-default pre .lasso .variable,.hljs-default pre .asciidoc .bullet,.hljs-default pre .markdown .bullet,.hljs-default pre .asciidoc .link_url,.hljs-default pre .markdown .link_url{color:#080;}.hljs-default pre .label,.hljs-default pre .javadoc,.hljs-default pre .ruby .string,.hljs-default pre .decorator,.hljs-default pre .filter .argument,.hljs-default pre .localvars,.hljs-default pre .array,.hljs-default pre .attr_selector,.hljs-default pre .important,.hljs-default pre .pseudo,.hljs-default pre .pi,.hljs-default pre .haml .bullet,.hljs-default pre .doctype,.hljs-default pre .deletion,.hljs-default pre .envvar,.hljs-default pre .shebang,.hljs-default pre .apache .sqbracket,.hljs-default pre .nginx .built_in,.hljs-default pre .tex .formula,.hljs-default pre .erlang_repl .reserved,.hljs-default pre .prompt,.hljs-default pre .asciidoc .link_label,.hljs-default pre .markdown .link_label,.hljs-default pre .vhdl .attribute,.hljs-default pre .clojure .attribute,.hljs-default pre .asciidoc .attribute,.hljs-default pre .lasso .attribute,.hljs-default pre .coffeescript .property{color:#8888ff;}.hljs-default pre .keyword,.hljs-default pre .id,.hljs-default pre .title,.hljs-default pre .built_in,.hljs-default pre .aggregate,.hljs-default pre .css .tag,.hljs-default pre .javadoctag,.hljs-default pre .phpdoc,.hljs-default pre .yardoctag,.hljs-default pre .smalltalk .class,.hljs-default pre .winutils,.hljs-default pre .bash .variable,.hljs-default pre .apache .tag,.hljs-default pre .go .typename,.hljs-default pre .tex .command,.hljs-default pre .asciidoc .strong,.hljs-default pre .markdown .strong,.hljs-default pre .request,.hljs-default pre .status{font-weight:bold;}.hljs-default pre .asciidoc .emphasis,.hljs-default pre .markdown .emphasis{font-style:italic;}.hljs-default pre .nginx .built_in{font-weight:normal;}.hljs-default pre .coffeescript .javascript,.hljs-default pre .javascript .xml,.hljs-default pre .lasso .markup,.hljs-default pre .tex .formula,.hljs-default pre .xml .javascript,.hljs-default pre .xml .vbscript,.hljs-default pre .xml .css,.hljs-default pre .xml .cdata{opacity:0.5;}.hljs-magula{}.hljs-magula pre code{display:block;padding:0.5em;background-color:#f4f4f4;}.hljs-magula pre code,.hljs-magula pre .subst,.hljs-magula pre .lisp .title,.hljs-magula pre .clojure .built_in{color:black;}.hljs-magula pre .string,.hljs-magula pre .title,.hljs-magula pre .parent,.hljs-magula pre .tag .value,.hljs-magula pre .rules .value,.hljs-magula pre .rules .value .number,.hljs-magula pre .preprocessor,.hljs-magula pre .ruby .symbol,.hljs-magula pre .ruby .symbol .string,.hljs-magula pre .aggregate,.hljs-magula pre .template_tag,.hljs-magula pre .django .variable,.hljs-magula pre .smalltalk .class,.hljs-magula pre .addition,.hljs-magula pre .flow,.hljs-magula pre .stream,.hljs-magula pre .bash .variable,.hljs-magula pre .apache .cbracket,.hljs-magula pre .coffeescript .attribute{color:#050;}.hljs-magula pre .comment,.hljs-magula pre .annotation,.hljs-magula pre .template_comment,.hljs-magula pre .diff .header,.hljs-magula pre .chunk{color:#777;}.hljs-magula pre .number,.hljs-magula pre .date,.hljs-magula pre .regexp,.hljs-magula pre .literal,.hljs-magula pre .smalltalk .symbol,.hljs-magula pre .smalltalk .char,.hljs-magula pre .change,.hljs-magula pre .tex .special{color:#800;}.hljs-magula pre .label,.hljs-magula pre .javadoc,.hljs-magula pre .ruby .string,.hljs-magula pre .decorator,.hljs-magula pre .filter .argument,.hljs-magula pre .localvars,.hljs-magula pre .array,.hljs-magula pre .attr_selector,.hljs-magula pre .pseudo,.hljs-magula pre .pi,.hljs-magula pre .doctype,.hljs-magula pre .deletion,.hljs-magula pre .envvar,.hljs-magula pre .shebang,.hljs-magula pre .apache .sqbracket,.hljs-magula pre .nginx .built_in,.hljs-magula pre .tex .formula,.hljs-magula pre .prompt,.hljs-magula pre .clojure .attribute{color:#00e;}.hljs-magula pre .keyword,.hljs-magula pre .id,.hljs-magula pre .phpdoc,.hljs-magula pre .title,.hljs-magula pre .built_in,.hljs-magula pre .aggregate,.hljs-magula pre .smalltalk .class,.hljs-magula pre .winutils,.hljs-magula pre .bash .variable,.hljs-magula pre .apache .tag,.hljs-magula pre .xml .tag,.hljs-magula pre .tex .command,.hljs-magula pre .request,.hljs-magula pre .status{font-weight:bold;color:navy;}.hljs-magula pre .nginx .built_in{font-weight:normal;}.hljs-magula pre .coffeescript .javascript,.hljs-magula pre .javascript .xml,.hljs-magula pre .tex .formula,.hljs-magula pre .xml .javascript,.hljs-magula pre .xml .vbscript,.hljs-magula pre .xml .css,.hljs-magula pre .xml .cdata{opacity:0.5;}.hljs-magula pre .apache .tag{font-weight:bold;color:blue;}.hljs-tomorrow{}.hljs-tomorrow .tomorrow-comment,.hljs-tomorrow pre .comment,.hljs-tomorrow pre .title{color:#8e908c;}.hljs-tomorrow .tomorrow-red,.hljs-tomorrow pre .variable,.hljs-tomorrow pre .attribute,.hljs-tomorrow pre .tag,.hljs-tomorrow pre .regexp,.hljs-tomorrow pre .ruby .constant,.hljs-tomorrow pre .xml .tag .title,.hljs-tomorrow pre .xml .pi,.hljs-tomorrow pre .xml .doctype,.hljs-tomorrow pre .html .doctype,.hljs-tomorrow pre .css .id,.hljs-tomorrow pre .css .class,.hljs-tomorrow pre .css .pseudo{color:#c82829;}.hljs-tomorrow .tomorrow-orange,.hljs-tomorrow pre .number,.hljs-tomorrow pre .preprocessor,.hljs-tomorrow pre .built_in,.hljs-tomorrow pre .literal,.hljs-tomorrow pre .params,.hljs-tomorrow pre .constant{color:#f5871f;}.hljs-tomorrow .tomorrow-yellow,.hljs-tomorrow pre .ruby .class .title,.hljs-tomorrow pre .css .rules .attribute{color:#eab700;}.hljs-tomorrow .tomorrow-green,.hljs-tomorrow pre .string,.hljs-tomorrow pre .value,.hljs-tomorrow pre .inheritance,.hljs-tomorrow pre .header,.hljs-tomorrow pre .ruby .symbol,.hljs-tomorrow pre .xml .cdata{color:#718c00;}.hljs-tomorrow .tomorrow-aqua,.hljs-tomorrow pre .css .hexcolor{color:#3e999f;}.hljs-tomorrow .tomorrow-blue,.hljs-tomorrow pre .function,.hljs-tomorrow pre .python .decorator,.hljs-tomorrow pre .python .title,.hljs-tomorrow pre .ruby .function .title,.hljs-tomorrow pre .ruby .title .keyword,.hljs-tomorrow pre .perl .sub,.hljs-tomorrow pre .javascript .title,.hljs-tomorrow pre .coffeescript .title{color:#4271ae;}.hljs-tomorrow .tomorrow-purple,.hljs-tomorrow pre .keyword,.hljs-tomorrow pre .javascript .function{color:#8959a8;}.hljs-tomorrow pre code{display:block;background:white;color:#4d4d4c;padding:0.5em;}.hljs-tomorrow pre .coffeescript .javascript,.hljs-tomorrow pre .javascript .xml,.hljs-tomorrow pre .tex .formula,.hljs-tomorrow pre .xml .javascript,.hljs-tomorrow pre .xml .vbscript,.hljs-tomorrow pre .xml .css,.hljs-tomorrow pre .xml .cdata{opacity:0.5;}.hljs-xcode{}.hljs-xcode pre code{display:block;padding:0.5em;background:#fff;color:black;}.hljs-xcode pre .comment,.hljs-xcode pre .template_comment,.hljs-xcode pre .javadoc,.hljs-xcode pre .comment *{color:#006a00;}.hljs-xcode pre .keyword,.hljs-xcode pre .literal,.hljs-xcode pre .nginx .title{color:#aa0d91;}.hljs-xcode pre .method,.hljs-xcode pre .list .title,.hljs-xcode pre .tag .title,.hljs-xcode pre .setting .value,.hljs-xcode pre .winutils,.hljs-xcode pre .tex .command,.hljs-xcode pre .http .title,.hljs-xcode pre .request,.hljs-xcode pre .status{color:#008;}.hljs-xcode pre .envvar,.hljs-xcode pre .tex .special{color:#660;}.hljs-xcode pre .string{color:#c41a16;}.hljs-xcode pre .tag .value,.hljs-xcode pre .cdata,.hljs-xcode pre .filter .argument,.hljs-xcode pre .attr_selector,.hljs-xcode pre .apache .cbracket,.hljs-xcode pre .date,.hljs-xcode pre .regexp{color:#080;}.hljs-xcode pre .sub .identifier,.hljs-xcode pre .pi,.hljs-xcode pre .tag,.hljs-xcode pre .tag .keyword,.hljs-xcode pre .decorator,.hljs-xcode pre .ini .title,.hljs-xcode pre .shebang,.hljs-xcode pre .prompt,.hljs-xcode pre .hexcolor,.hljs-xcode pre .rules .value,.hljs-xcode pre .css .value .number,.hljs-xcode pre .symbol,.hljs-xcode pre .symbol .string,.hljs-xcode pre .number,.hljs-xcode pre .css .function,.hljs-xcode pre .clojure .title,.hljs-xcode pre .clojure .built_in,.hljs-xcode pre .function .title,.hljs-xcode pre .coffeescript .attribute{color:#1c00cf;}.hljs-xcode pre .class .title,.hljs-xcode pre .haskell .type,.hljs-xcode pre .smalltalk .class,.hljs-xcode pre .javadoctag,.hljs-xcode pre .yardoctag,.hljs-xcode pre .phpdoc,.hljs-xcode pre .typename,.hljs-xcode pre .tag .attribute,.hljs-xcode pre .doctype,.hljs-xcode pre .class .id,.hljs-xcode pre .built_in,.hljs-xcode pre .setting,.hljs-xcode pre .params,.hljs-xcode pre .clojure .attribute{color:#5c2699;}.hljs-xcode pre .variable{color:#3f6e74;}.hljs-xcode pre .css .tag,.hljs-xcode pre .rules .property,.hljs-xcode pre .pseudo,.hljs-xcode pre .subst{color:#000;}.hljs-xcode pre .css .class,.hljs-xcode pre .css .id{color:#9B703F;}.hljs-xcode pre .value .important{color:#ff7700;font-weight:bold;}.hljs-xcode pre .rules .keyword{color:#C5AF75;}.hljs-xcode pre .annotation,.hljs-xcode pre .apache .sqbracket,.hljs-xcode pre .nginx .built_in{color:#9B859D;}.hljs-xcode pre .preprocessor,.hljs-xcode pre .preprocessor *{color:#643820;}.hljs-xcode pre .tex .formula{background-color:#EEE;font-style:italic;}.hljs-xcode pre .diff .header,.hljs-xcode pre .chunk{color:#808080;font-weight:bold;}.hljs-xcode pre .diff .change{background-color:#BCCFF9;}.hljs-xcode pre .addition{background-color:#BAEEBA;}.hljs-xcode pre .deletion{background-color:#FFC8BD;}.hljs-xcode pre .comment .yardoctag{font-weight:bold;}.hljs-xcode pre .method .id{color:#000;}.hljs-monokai_sublime{}.hljs-monokai_sublime pre code{display:block;padding:0.5em;background:#23241f;}.hljs-monokai_sublime pre .tag,.hljs-monokai_sublime pre code{color:#f8f8f2;}.hljs-monokai_sublime pre .keyword,.hljs-monokai_sublime pre .function,.hljs-monokai_sublime pre .literal,.hljs-monokai_sublime pre .change,.hljs-monokai_sublime pre .winutils,.hljs-monokai_sublime pre .flow,.hljs-monokai_sublime pre .lisp .title,.hljs-monokai_sublime pre .clojure .built_in,.hljs-monokai_sublime pre .nginx .title,.hljs-monokai_sublime pre .tex .special{color:#66d9ef;}.hljs-monokai_sublime pre .variable,.hljs-monokai_sublime pre .params{color:#fd9720;}.hljs-monokai_sublime pre .constant{color:#66d9ef;}.hljs-monokai_sublime pre .title,.hljs-monokai_sublime pre .class .title,.hljs-monokai_sublime pre .css .class{color:#a6e22e;}.hljs-monokai_sublime pre .attribute,.hljs-monokai_sublime pre .symbol,.hljs-monokai_sublime pre .symbol .string,.hljs-monokai_sublime pre .tag .title,.hljs-monokai_sublime pre .value,.hljs-monokai_sublime pre .css .tag{color:#f92672;}.hljs-monokai_sublime pre .number,.hljs-monokai_sublime pre .preprocessor,.hljs-monokai_sublime pre .regexp{color:#ae81ff;}.hljs-monokai_sublime pre .tag .value,.hljs-monokai_sublime pre .string,.hljs-monokai_sublime pre .css .id,.hljs-monokai_sublime pre .subst,.hljs-monokai_sublime pre .haskell .type,.hljs-monokai_sublime pre .ruby .class .parent,.hljs-monokai_sublime pre .built_in,.hljs-monokai_sublime pre .sql .aggregate,.hljs-monokai_sublime pre .django .template_tag,.hljs-monokai_sublime pre .django .variable,.hljs-monokai_sublime pre .smalltalk .class,.hljs-monokai_sublime pre .django .filter .argument,.hljs-monokai_sublime pre .smalltalk .localvars,.hljs-monokai_sublime pre .smalltalk .array,.hljs-monokai_sublime pre .attr_selector,.hljs-monokai_sublime pre .pseudo,.hljs-monokai_sublime pre .addition,.hljs-monokai_sublime pre .stream,.hljs-monokai_sublime pre .envvar,.hljs-monokai_sublime pre .apache .tag,.hljs-monokai_sublime pre .apache .cbracket,.hljs-monokai_sublime pre .tex .command,.hljs-monokai_sublime pre .prompt{color:#e6db74;}.hljs-monokai_sublime pre .comment,.hljs-monokai_sublime pre .javadoc,.hljs-monokai_sublime pre .java .annotation,.hljs-monokai_sublime pre .python .decorator,.hljs-monokai_sublime pre .template_comment,.hljs-monokai_sublime pre .pi,.hljs-monokai_sublime pre .doctype,.hljs-monokai_sublime pre .deletion,.hljs-monokai_sublime pre .shebang,.hljs-monokai_sublime pre .apache .sqbracket,.hljs-monokai_sublime pre .tex .formula{color:#75715e;}.hljs-monokai_sublime pre .coffeescript .javascript,.hljs-monokai_sublime pre .javascript .xml,.hljs-monokai_sublime pre .tex .formula{opacity:0.5;}.hljs-monokai_sublime pre .xml .javascript,.hljs-monokai_sublime pre .xml .vbscript,.hljs-monokai_sublime pre .xml .css,.hljs-monokai_sublime pre .xml .cdata{opacity:0.5;}.hljs-rainbow{}.hljs-rainbow pre ::-moz-selection{background:#FF5E99;color:#fff;text-shadow:none;}.hljs-rainbow pre ::selection{background:#FF5E99;color:#fff;text-shadow:none;}.hljs-rainbow pre code{display:block;padding:0.5em;background:#474949;color:#D1D9E1;}.hljs-rainbow pre .body,.hljs-rainbow pre .collection{color:#D1D9E1;}.hljs-rainbow pre .comment,.hljs-rainbow pre .template_comment,.hljs-rainbow pre .diff .header,.hljs-rainbow pre .doctype,.hljs-rainbow pre .lisp .string,.hljs-rainbow pre .javadoc{color:#969896;font-style:italic;}.hljs-rainbow pre .keyword,.hljs-rainbow pre .clojure .attribute,.hljs-rainbow pre .winutils,.hljs-rainbow pre .javascript .title,.hljs-rainbow pre .addition,.hljs-rainbow pre .css .tag{color:#cc99cc;}.hljs-rainbow pre .number{color:#f99157;}.hljs-rainbow pre .command,.hljs-rainbow pre .string,.hljs-rainbow pre .tag .value,.hljs-rainbow pre .phpdoc,.hljs-rainbow pre .tex .formula,.hljs-rainbow pre .regexp,.hljs-rainbow pre .hexcolor{color:#8abeb7;}.hljs-rainbow pre .title,.hljs-rainbow pre .localvars,.hljs-rainbow pre .function .title,.hljs-rainbow pre .chunk,.hljs-rainbow pre .decorator,.hljs-rainbow pre .built_in,.hljs-rainbow pre .lisp .title,.hljs-rainbow pre .identifier{color:#b5bd68;}.hljs-rainbow pre .class .keyword{color:#f2777a;}.hljs-rainbow pre .variable,.hljs-rainbow pre .lisp .body,.hljs-rainbow pre .smalltalk .number,.hljs-rainbow pre .constant,.hljs-rainbow pre .class .title,.hljs-rainbow pre .parent,.hljs-rainbow pre .haskell .label,.hljs-rainbow pre .id,.hljs-rainbow pre .lisp .title,.hljs-rainbow pre .clojure .title .built_in{color:#ffcc66;}.hljs-rainbow pre .tag .title,.hljs-rainbow pre .rules .property,.hljs-rainbow pre .django .tag .keyword,.hljs-rainbow pre .clojure .title .built_in{font-weight:bold;}.hljs-rainbow pre .attribute,.hljs-rainbow pre .clojure .title{color:#81a2be;}.hljs-rainbow pre .preprocessor,.hljs-rainbow pre .pi,.hljs-rainbow pre .shebang,.hljs-rainbow pre .symbol,.hljs-rainbow pre .symbol .string,.hljs-rainbow pre .diff .change,.hljs-rainbow pre .special,.hljs-rainbow pre .attr_selector,.hljs-rainbow pre .important,.hljs-rainbow pre .subst,.hljs-rainbow pre .cdata{color:#f99157;}.hljs-rainbow pre .deletion{color:#dc322f;}.hljs-rainbow pre .tex .formula{background:#eee8d5;}.hljs-tomorrow-night-bright{}.hljs-tomorrow-night-bright .tomorrow-comment,.hljs-tomorrow-night-bright pre .comment,.hljs-tomorrow-night-bright pre .title{color:#969896;}.hljs-tomorrow-night-bright .tomorrow-red,.hljs-tomorrow-night-bright pre .variable,.hljs-tomorrow-night-bright pre .attribute,.hljs-tomorrow-night-bright pre .tag,.hljs-tomorrow-night-bright pre .regexp,.hljs-tomorrow-night-bright pre .ruby .constant,.hljs-tomorrow-night-bright pre .xml .tag .title,.hljs-tomorrow-night-bright pre .xml .pi,.hljs-tomorrow-night-bright pre .xml .doctype,.hljs-tomorrow-night-bright pre .html .doctype,.hljs-tomorrow-night-bright pre .css .id,.hljs-tomorrow-night-bright pre .css .class,.hljs-tomorrow-night-bright pre .css .pseudo{color:#d54e53;}.hljs-tomorrow-night-bright .tomorrow-orange,.hljs-tomorrow-night-bright pre .number,.hljs-tomorrow-night-bright pre .preprocessor,.hljs-tomorrow-night-bright pre .built_in,.hljs-tomorrow-night-bright pre .literal,.hljs-tomorrow-night-bright pre .params,.hljs-tomorrow-night-bright pre .constant{color:#e78c45;}.hljs-tomorrow-night-bright .tomorrow-yellow,.hljs-tomorrow-night-bright pre .ruby .class .title,.hljs-tomorrow-night-bright pre .css .rules .attribute{color:#e7c547;}.hljs-tomorrow-night-bright .tomorrow-green,.hljs-tomorrow-night-bright pre .string,.hljs-tomorrow-night-bright pre .value,.hljs-tomorrow-night-bright pre .inheritance,.hljs-tomorrow-night-bright pre .header,.hljs-tomorrow-night-bright pre .ruby .symbol,.hljs-tomorrow-night-bright pre .xml .cdata{color:#b9ca4a;}.hljs-tomorrow-night-bright .tomorrow-aqua,.hljs-tomorrow-night-bright pre .css .hexcolor{color:#70c0b1;}.hljs-tomorrow-night-bright .tomorrow-blue,.hljs-tomorrow-night-bright pre .function,.hljs-tomorrow-night-bright pre .python .decorator,.hljs-tomorrow-night-bright pre .python .title,.hljs-tomorrow-night-bright pre .ruby .function .title,.hljs-tomorrow-night-bright pre .ruby .title .keyword,.hljs-tomorrow-night-bright pre .perl .sub,.hljs-tomorrow-night-bright pre .javascript .title,.hljs-tomorrow-night-bright pre .coffeescript .title{color:#7aa6da;}.hljs-tomorrow-night-bright .tomorrow-purple,.hljs-tomorrow-night-bright pre .keyword,.hljs-tomorrow-night-bright pre .javascript .function{color:#c397d8;}.hljs-tomorrow-night-bright pre code{display:block;background:black;color:#eaeaea;padding:0.5em;}.hljs-tomorrow-night-bright pre .coffeescript .javascript,.hljs-tomorrow-night-bright pre .javascript .xml,.hljs-tomorrow-night-bright pre .tex .formula,.hljs-tomorrow-night-bright pre .xml .javascript,.hljs-tomorrow-night-bright pre .xml .vbscript,.hljs-tomorrow-night-bright pre .xml .css,.hljs-tomorrow-night-bright pre .xml .cdata{opacity:0.5;}.hljs-ir_black{}.hljs-ir_black pre code{display:block;padding:0.5em;background:#000;color:#f8f8f8;}.hljs-ir_black pre .shebang,.hljs-ir_black pre .comment,.hljs-ir_black pre .template_comment,.hljs-ir_black pre .javadoc{color:#7c7c7c;}.hljs-ir_black pre .keyword,.hljs-ir_black pre .tag,.hljs-ir_black pre .tex .command,.hljs-ir_black pre .request,.hljs-ir_black pre .status,.hljs-ir_black pre .clojure .attribute{color:#96CBFE;}.hljs-ir_black pre .sub .keyword,.hljs-ir_black pre .method,.hljs-ir_black pre .list .title,.hljs-ir_black pre .nginx .title{color:#FFFFB6;}.hljs-ir_black pre .string,.hljs-ir_black pre .tag .value,.hljs-ir_black pre .cdata,.hljs-ir_black pre .filter .argument,.hljs-ir_black pre .attr_selector,.hljs-ir_black pre .apache .cbracket,.hljs-ir_black pre .date,.hljs-ir_black pre .coffeescript .attribute{color:#A8FF60;}.hljs-ir_black pre .subst{color:#DAEFA3;}.hljs-ir_black pre .regexp{color:#E9C062;}.hljs-ir_black pre .title,.hljs-ir_black pre .sub .identifier,.hljs-ir_black pre .pi,.hljs-ir_black pre .decorator,.hljs-ir_black pre .tex .special,.hljs-ir_black pre .haskell .type,.hljs-ir_black pre .constant,.hljs-ir_black pre .smalltalk .class,.hljs-ir_black pre .javadoctag,.hljs-ir_black pre .yardoctag,.hljs-ir_black pre .phpdoc,.hljs-ir_black pre .nginx .built_in{color:#FFFFB6;}.hljs-ir_black pre .symbol,.hljs-ir_black pre .ruby .symbol .string,.hljs-ir_black pre .number,.hljs-ir_black pre .variable,.hljs-ir_black pre .vbscript,.hljs-ir_black pre .literal{color:#C6C5FE;}.hljs-ir_black pre .css .tag{color:#96CBFE;}.hljs-ir_black pre .css .rules .property,.hljs-ir_black pre .css .id{color:#FFFFB6;}.hljs-ir_black pre .css .class{color:#FFF;}.hljs-ir_black pre .hexcolor{color:#C6C5FE;}.hljs-ir_black pre .number{color:#FF73FD;}.hljs-ir_black pre .coffeescript .javascript,.hljs-ir_black pre .javascript .xml,.hljs-ir_black pre .tex .formula,.hljs-ir_black pre .xml .javascript,.hljs-ir_black pre .xml .vbscript,.hljs-ir_black pre .xml .css,.hljs-ir_black pre .xml .cdata{opacity:0.7;}.hljs-tomorrow-night-blue{}.hljs-tomorrow-night-blue .tomorrow-comment,.hljs-tomorrow-night-blue pre .comment,.hljs-tomorrow-night-blue pre .title{color:#7285b7;}.hljs-tomorrow-night-blue .tomorrow-red,.hljs-tomorrow-night-blue pre .variable,.hljs-tomorrow-night-blue pre .attribute,.hljs-tomorrow-night-blue pre .tag,.hljs-tomorrow-night-blue pre .regexp,.hljs-tomorrow-night-blue pre .ruby .constant,.hljs-tomorrow-night-blue pre .xml .tag .title,.hljs-tomorrow-night-blue pre .xml .pi,.hljs-tomorrow-night-blue pre .xml .doctype,.hljs-tomorrow-night-blue pre .html .doctype,.hljs-tomorrow-night-blue pre .css .id,.hljs-tomorrow-night-blue pre .css .class,.hljs-tomorrow-night-blue pre .css .pseudo{color:#ff9da4;}.hljs-tomorrow-night-blue .tomorrow-orange,.hljs-tomorrow-night-blue pre .number,.hljs-tomorrow-night-blue pre .preprocessor,.hljs-tomorrow-night-blue pre .built_in,.hljs-tomorrow-night-blue pre .literal,.hljs-tomorrow-night-blue pre .params,.hljs-tomorrow-night-blue pre .constant{color:#ffc58f;}.hljs-tomorrow-night-blue .tomorrow-yellow,.hljs-tomorrow-night-blue pre .ruby .class .title,.hljs-tomorrow-night-blue pre .css .rules .attribute{color:#ffeead;}.hljs-tomorrow-night-blue .tomorrow-green,.hljs-tomorrow-night-blue pre .string,.hljs-tomorrow-night-blue pre .value,.hljs-tomorrow-night-blue pre .inheritance,.hljs-tomorrow-night-blue pre .header,.hljs-tomorrow-night-blue pre .ruby .symbol,.hljs-tomorrow-night-blue pre .xml .cdata{color:#d1f1a9;}.hljs-tomorrow-night-blue .tomorrow-aqua,.hljs-tomorrow-night-blue pre .css .hexcolor{color:#99ffff;}.hljs-tomorrow-night-blue .tomorrow-blue,.hljs-tomorrow-night-blue pre .function,.hljs-tomorrow-night-blue pre .python .decorator,.hljs-tomorrow-night-blue pre .python .title,.hljs-tomorrow-night-blue pre .ruby .function .title,.hljs-tomorrow-night-blue pre .ruby .title .keyword,.hljs-tomorrow-night-blue pre .perl .sub,.hljs-tomorrow-night-blue pre .javascript .title,.hljs-tomorrow-night-blue pre .coffeescript .title{color:#bbdaff;}.hljs-tomorrow-night-blue .tomorrow-purple,.hljs-tomorrow-night-blue pre .keyword,.hljs-tomorrow-night-blue pre .javascript .function{color:#ebbbff;}.hljs-tomorrow-night-blue pre code{display:block;background:#002451;color:white;padding:0.5em;}.hljs-tomorrow-night-blue pre .coffeescript .javascript,.hljs-tomorrow-night-blue pre .javascript .xml,.hljs-tomorrow-night-blue pre .tex .formula,.hljs-tomorrow-night-blue pre .xml .javascript,.hljs-tomorrow-night-blue pre .xml .vbscript,.hljs-tomorrow-night-blue pre .xml .css,.hljs-tomorrow-night-blue pre .xml .cdata{opacity:0.5;}.hljs-idea{}.hljs-idea pre code{display:block;padding:0.5em;color:#000;background:#fff;}.hljs-idea pre .subst,.hljs-idea pre .title{font-weight:normal;color:#000;}.hljs-idea pre .comment,.hljs-idea pre .template_comment,.hljs-idea pre .javadoc,.hljs-idea pre .diff .header{color:#808080;font-style:italic;}.hljs-idea pre .annotation,.hljs-idea pre .decorator,.hljs-idea pre .preprocessor,.hljs-idea pre .doctype,.hljs-idea pre .pi,.hljs-idea pre .chunk,.hljs-idea pre .shebang,.hljs-idea pre .apache .cbracket,.hljs-idea pre .prompt,.hljs-idea pre .http .title{color:#808000;}.hljs-idea pre .tag,.hljs-idea pre .pi{background:#efefef;}.hljs-idea pre .tag .title,.hljs-idea pre .id,.hljs-idea pre .attr_selector,.hljs-idea pre .pseudo,.hljs-idea pre .literal,.hljs-idea pre .keyword,.hljs-idea pre .hexcolor,.hljs-idea pre .css .function,.hljs-idea pre .ini .title,.hljs-idea pre .css .class,.hljs-idea pre .list .title,.hljs-idea pre .clojure .title,.hljs-idea pre .nginx .title,.hljs-idea pre .tex .command,.hljs-idea pre .request,.hljs-idea pre .status{font-weight:bold;color:#000080;}.hljs-idea pre .attribute,.hljs-idea pre .rules .keyword,.hljs-idea pre .number,.hljs-idea pre .date,.hljs-idea pre .regexp,.hljs-idea pre .tex .special{font-weight:bold;color:#0000ff;}.hljs-idea pre .number,.hljs-idea pre .regexp{font-weight:normal;}.hljs-idea pre .string,.hljs-idea pre .value,.hljs-idea pre .filter .argument,.hljs-idea pre .css .function .params,.hljs-idea pre .apache .tag{color:#008000;font-weight:bold;}.hljs-idea pre .symbol,.hljs-idea pre .ruby .symbol .string,.hljs-idea pre .char,.hljs-idea pre .tex .formula{color:#000;background:#d0eded;font-style:italic;}.hljs-idea pre .phpdoc,.hljs-idea pre .yardoctag,.hljs-idea pre .javadoctag{text-decoration:underline;}.hljs-idea pre .variable,.hljs-idea pre .envvar,.hljs-idea pre .apache .sqbracket,.hljs-idea pre .nginx .built_in{color:#660e7a;}.hljs-idea pre .addition{background:#baeeba;}.hljs-idea pre .deletion{background:#ffc8bd;}.hljs-idea pre .diff .change{background:#bccff9;}.hljs-zenburn{}.hljs-zenburn pre code{display:block;padding:0.5em;background:#3F3F3F;color:#DCDCDC;}.hljs-zenburn pre .keyword,.hljs-zenburn pre .tag,.hljs-zenburn pre .css .class,.hljs-zenburn pre .css .id,.hljs-zenburn pre .lisp .title,.hljs-zenburn pre .nginx .title,.hljs-zenburn pre .request,.hljs-zenburn pre .status,.hljs-zenburn pre .clojure .attribute{color:#E3CEAB;}.hljs-zenburn pre .django .template_tag,.hljs-zenburn pre .django .variable,.hljs-zenburn pre .django .filter .argument{color:#DCDCDC;}.hljs-zenburn pre .number,.hljs-zenburn pre .date{color:#8CD0D3;}.hljs-zenburn pre .dos .envvar,.hljs-zenburn pre .dos .stream,.hljs-zenburn pre .variable,.hljs-zenburn pre .apache .sqbracket{color:#EFDCBC;}.hljs-zenburn pre .dos .flow,.hljs-zenburn pre .diff .change,.hljs-zenburn pre .python .exception,.hljs-zenburn pre .python .built_in,.hljs-zenburn pre .literal,.hljs-zenburn pre .tex .special{color:#EFEFAF;}.hljs-zenburn pre .diff .chunk,.hljs-zenburn pre .subst{color:#8F8F8F;}.hljs-zenburn pre .dos .keyword,.hljs-zenburn pre .python .decorator,.hljs-zenburn pre .title,.hljs-zenburn pre .haskell .type,.hljs-zenburn pre .diff .header,.hljs-zenburn pre .ruby .class .parent,.hljs-zenburn pre .apache .tag,.hljs-zenburn pre .nginx .built_in,.hljs-zenburn pre .tex .command,.hljs-zenburn pre .prompt{color:#efef8f;}.hljs-zenburn pre .dos .winutils,.hljs-zenburn pre .ruby .symbol,.hljs-zenburn pre .ruby .symbol .string,.hljs-zenburn pre .ruby .string{color:#DCA3A3;}.hljs-zenburn pre .diff .deletion,.hljs-zenburn pre .string,.hljs-zenburn pre .tag .value,.hljs-zenburn pre .preprocessor,.hljs-zenburn pre .built_in,.hljs-zenburn pre .sql .aggregate,.hljs-zenburn pre .javadoc,.hljs-zenburn pre .smalltalk .class,.hljs-zenburn pre .smalltalk .localvars,.hljs-zenburn pre .smalltalk .array,.hljs-zenburn pre .css .rules .value,.hljs-zenburn pre .attr_selector,.hljs-zenburn pre .pseudo,.hljs-zenburn pre .apache .cbracket,.hljs-zenburn pre .tex .formula,.hljs-zenburn pre .coffeescript .attribute{color:#CC9393;}.hljs-zenburn pre .shebang,.hljs-zenburn pre .diff .addition,.hljs-zenburn pre .comment,.hljs-zenburn pre .java .annotation,.hljs-zenburn pre .template_comment,.hljs-zenburn pre .pi,.hljs-zenburn pre .doctype{color:#7F9F7F;}.hljs-zenburn pre .coffeescript .javascript,.hljs-zenburn pre .javascript .xml,.hljs-zenburn pre .tex .formula,.hljs-zenburn pre .xml .javascript,.hljs-zenburn pre .xml .vbscript,.hljs-zenburn pre .xml .css,.hljs-zenburn pre .xml .cdata{opacity:0.5;}.hljs-railscasts{}.hljs-railscasts pre code{display:block;padding:0.5em;background:#232323;color:#E6E1DC;}.hljs-railscasts pre .comment,.hljs-railscasts pre .template_comment,.hljs-railscasts pre .javadoc,.hljs-railscasts pre .shebang{color:#BC9458;font-style:italic;}.hljs-railscasts pre .keyword,.hljs-railscasts pre .ruby .function .keyword,.hljs-railscasts pre .request,.hljs-railscasts pre .status,.hljs-railscasts pre .nginx .title,.hljs-railscasts pre .method,.hljs-railscasts pre .list .title{color:#C26230;}.hljs-railscasts pre .string,.hljs-railscasts pre .number,.hljs-railscasts pre .regexp,.hljs-railscasts pre .tag .value,.hljs-railscasts pre .cdata,.hljs-railscasts pre .filter .argument,.hljs-railscasts pre .attr_selector,.hljs-railscasts pre .apache .cbracket,.hljs-railscasts pre .date,.hljs-railscasts pre .tex .command,.hljs-railscasts pre .markdown .link_label{color:#A5C261;}.hljs-railscasts pre .subst{color:#519F50;}.hljs-railscasts pre .tag,.hljs-railscasts pre .tag .keyword,.hljs-railscasts pre .tag .title,.hljs-railscasts pre .doctype,.hljs-railscasts pre .sub .identifier,.hljs-railscasts pre .pi,.hljs-railscasts pre .input_number{color:#E8BF6A;}.hljs-railscasts pre .identifier{color:#D0D0FF;}.hljs-railscasts pre .class .title,.hljs-railscasts pre .haskell .type,.hljs-railscasts pre .smalltalk .class,.hljs-railscasts pre .javadoctag,.hljs-railscasts pre .yardoctag,.hljs-railscasts pre .phpdoc{text-decoration:none;}.hljs-railscasts pre .constant{color:#DA4939;}.hljs-railscasts pre .symbol,.hljs-railscasts pre .built_in,.hljs-railscasts pre .ruby .symbol .string,.hljs-railscasts pre .ruby .symbol .identifier,.hljs-railscasts pre .markdown .link_url,.hljs-railscasts pre .attribute{color:#6D9CBE;}.hljs-railscasts pre .markdown .link_url{text-decoration:underline;}.hljs-railscasts pre .params,.hljs-railscasts pre .variable,.hljs-railscasts pre .clojure .attribute{color:#D0D0FF;}.hljs-railscasts pre .css .tag,.hljs-railscasts pre .rules .property,.hljs-railscasts pre .pseudo,.hljs-railscasts pre .tex .special{color:#CDA869;}.hljs-railscasts pre .css .class{color:#9B703F;}.hljs-railscasts pre .rules .keyword{color:#C5AF75;}.hljs-railscasts pre .rules .value{color:#CF6A4C;}.hljs-railscasts pre .css .id{color:#8B98AB;}.hljs-railscasts pre .annotation,.hljs-railscasts pre .apache .sqbracket,.hljs-railscasts pre .nginx .built_in{color:#9B859D;}.hljs-railscasts pre .preprocessor,.hljs-railscasts pre .preprocessor *{color:#8996A8 !important;}.hljs-railscasts pre .hexcolor,.hljs-railscasts pre .css .value .number{color:#A5C261;}.hljs-railscasts pre .title,.hljs-railscasts pre .decorator,.hljs-railscasts pre .css .function{color:#FFC66D;}.hljs-railscasts pre .diff .header,.hljs-railscasts pre .chunk{background-color:#2F33AB;color:#E6E1DC;display:inline-block;width:100%;}.hljs-railscasts pre .diff .change{background-color:#4A410D;color:#F8F8F8;display:inline-block;width:100%;}.hljs-railscasts pre .addition{background-color:#144212;color:#E6E1DC;display:inline-block;width:100%;}.hljs-railscasts pre .deletion{background-color:#600;color:#E6E1DC;display:inline-block;width:100%;}.hljs-railscasts pre .coffeescript .javascript,.hljs-railscasts pre .javascript .xml,.hljs-railscasts pre .tex .formula,.hljs-railscasts pre .xml .javascript,.hljs-railscasts pre .xml .vbscript,.hljs-railscasts pre .xml .css,.hljs-railscasts pre .xml .cdata{opacity:0.7;}.hljs-monokai{}.hljs-monokai pre code{display:block;padding:0.5em;background:#272822;}.hljs-monokai pre .tag,.hljs-monokai pre .tag .title,.hljs-monokai pre .keyword,.hljs-monokai pre .literal,.hljs-monokai pre .strong,.hljs-monokai pre .change,.hljs-monokai pre .winutils,.hljs-monokai pre .flow,.hljs-monokai pre .lisp .title,.hljs-monokai pre .clojure .built_in,.hljs-monokai pre .nginx .title,.hljs-monokai pre .tex .special{color:#F92672;}.hljs-monokai pre code{color:#DDD;}.hljs-monokai pre code .constant{color:#66D9EF;}.hljs-monokai pre .code,.hljs-monokai pre .class .title,.hljs-monokai pre .header{color:white;}.hljs-monokai pre .link_label,.hljs-monokai pre .attribute,.hljs-monokai pre .symbol,.hljs-monokai pre .symbol .string,.hljs-monokai pre .value,.hljs-monokai pre .regexp{color:#BF79DB;}.hljs-monokai pre .link_url,.hljs-monokai pre .tag .value,.hljs-monokai pre .string,.hljs-monokai pre .bullet,.hljs-monokai pre .subst,.hljs-monokai pre .title,.hljs-monokai pre .emphasis,.hljs-monokai pre .haskell .type,.hljs-monokai pre .preprocessor,.hljs-monokai pre .ruby .class .parent,.hljs-monokai pre .built_in,.hljs-monokai pre .sql .aggregate,.hljs-monokai pre .django .template_tag,.hljs-monokai pre .django .variable,.hljs-monokai pre .smalltalk .class,.hljs-monokai pre .javadoc,.hljs-monokai pre .django .filter .argument,.hljs-monokai pre .smalltalk .localvars,.hljs-monokai pre .smalltalk .array,.hljs-monokai pre .attr_selector,.hljs-monokai pre .pseudo,.hljs-monokai pre .addition,.hljs-monokai pre .stream,.hljs-monokai pre .envvar,.hljs-monokai pre .apache .tag,.hljs-monokai pre .apache .cbracket,.hljs-monokai pre .tex .command,.hljs-monokai pre .prompt{color:#A6E22E;}.hljs-monokai pre .comment,.hljs-monokai pre .java .annotation,.hljs-monokai pre .blockquote,.hljs-monokai pre .horizontal_rule,.hljs-monokai pre .python .decorator,.hljs-monokai pre .template_comment,.hljs-monokai pre .pi,.hljs-monokai pre .doctype,.hljs-monokai pre .deletion,.hljs-monokai pre .shebang,.hljs-monokai pre .apache .sqbracket,.hljs-monokai pre .tex .formula{color:#75715E;}.hljs-monokai pre .keyword,.hljs-monokai pre .literal,.hljs-monokai pre .css .id,.hljs-monokai pre .phpdoc,.hljs-monokai pre .title,.hljs-monokai pre .header,.hljs-monokai pre .haskell .type,.hljs-monokai pre .vbscript .built_in,.hljs-monokai pre .sql .aggregate,.hljs-monokai pre .rsl .built_in,.hljs-monokai pre .smalltalk .class,.hljs-monokai pre .diff .header,.hljs-monokai pre .chunk,.hljs-monokai pre .winutils,.hljs-monokai pre .bash .variable,.hljs-monokai pre .apache .tag,.hljs-monokai pre .tex .special,.hljs-monokai pre .request,.hljs-monokai pre .status{font-weight:bold;}.hljs-monokai pre .coffeescript .javascript,.hljs-monokai pre .javascript .xml,.hljs-monokai pre .tex .formula,.hljs-monokai pre .xml .javascript,.hljs-monokai pre .xml .vbscript,.hljs-monokai pre .xml .css,.hljs-monokai pre .xml .cdata{opacity:0.5;}</style>
    <title>Docker Storage Drivers</title>
    
    <style type="text/css">
      @import url(http://fonts.useso.com/css?family=Yanone+Kaffeesatz);
      @import url(http://fonts.useso.com/css?family=Droid+Serif:400,700,400italic);
      @import url(http://fonts.useso.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; font-size: 150%; }

      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      a {
        text-decoration: none;
        color: blue;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
      .red { color: #fa0000; }
      .gray { color: #ccc; }
      .small { font-size: 70%; }
      .underline { text-decoration: underline; }
      .footnote {
        position: absolute;
        bottom: 3em;
      }
      li p { line-height: 1.25em; }
    </style>
  </head>
  <body class="remark-container">
    <textarea id="source" style="display: none;">



class: center, middle

# 深入

# Docker 存储驱动

## *

## Jérôme Petazzoni - @jpetazzo

## Docker - @docker

---

# 我是谁

- [@jpetazzo](https://twitter.com/jpetazzo)

- Tamer of Unicorns and Tinkerer Extraordinaire.red[¹]

- 脾气暴躁的法国DevOps人员 喜爱Shell scripts
  &lt;br/&gt; .small[Go Away Or I Will Replace You Wiz Le Very Small Shell Script]

- 有一些容器技术的使用经验
  &lt;br/&gt; (负责 dotCloud PaaS 的构建和运维工作)

- 打算使用Markdown来制作ppt(这的确是个好主意)


.footnote[.red[¹] 在的个人名片上至少标记着其中一项]

---

# 大纲

- Docker速览

- 简要介绍 copy-on-write

- Docker 存储驱动的发展历史

- AUFS, BTRFS, Device Mapper, Overlay.gray[fs], VFS

- 结论


---

class: center, middle

# Docker速览

---

# Docker是什么?

- 一个由 *Docker Engine* 和 *Docker Hub* 组成的平台

- *Docker Engine*指的是容器的运行时环境

- Docker是开源的 由Go语言所开发 
  &lt;br/&gt; .small[.small[ http://www.slideshare.net/jpetazzo/docker-and-go-why-did-we-decide-to-write-docker-in-go ]]

- 它是一个守护进程, 被REST API控制

- 还是不清楚，它到底是什么!?
  &lt;br/&gt; 这周五 参与在线的 "Docker 101" 会议:
  &lt;br/&gt; .small[ http://www.meetup.com/Docker-Online-Meetup/events/219867087/ ]

---

# 如果你在实际工作中从未使用过Docker 以下内容可能会帮到你 ...

This will help!

.small[
```
jpetazzo@tarrasque:~$ docker run -ti python bash
root@75d4bf28c8a5:/# pip install IPython
Downloading/unpacking IPython
  Downloading ipython-2.3.1-py3-none-any.whl (2.8MB): 2.8MB downloaded
Installing collected packages: IPython
Successfully installed IPython
Cleaning up...
root@75d4bf28c8a5:/# ipython
Python 3.4.2 (default, Jan 22 2015, 07:33:45) 
Type "copyright", "credits" or "license" for more information.

IPython 2.3.1 -- An enhanced Interactive Python.
?         -&gt; Introduction and overview of IPython's features.
%quickref -&gt; Quick reference.
help      -&gt; Python's own help system.
object?   -&gt; Details about 'object', use 'object??' for extra details.

In [1]:
```
]

---

# 这个过程中 发生了什么?

- 我们创建了一个 容器 (~相当于一个轻量级的虚拟机),
  &lt;br/&gt; 它拥有:

  - 文件系统 (基于一个 `python` 镜像)
  - 网络栈（network stack）
  - 进程空间

- 我们通过一个 `bash` 进程来启动
  &lt;br/&gt; (no `init`, no `systemd`, no problem)

- 我们通过pip安装了IPython, 并且将它运行起来

---

# 在这个过程中哪些.underline[没有]发生 ?

- 我们并没有完全地拷贝 `python` 镜像

安装过程在 容器 中完成, 而并非是在 镜像 中完成:

- 我们并没有修改 `python` 镜像本身

- 我们并没有影响其他容器的运行
  &lt;br/&gt; (当前使用的镜像或者其他的镜像)

---

# 为什么这个问题很重要?

- 我们使用的是 *copy-on-write* 机制
  &lt;br/&gt; (Docker 帮助我们进行处理)

- 我们并没有对'python'镜像进行完整地拷贝，我们仅仅是跟踪容器相对于镜像所发生的变化

- 这个过程节省了大量的硬盘空间 (1 个容器 = 小于 1 MB 的存储空间)

- 节省了大量的时间 (1 个容器 = 小于 0.1s 的启动时间)

---

class: center, middle

# 对于 copy-on-write 的简要介绍

---

# 历史背景

注意: 我并非是一个历史学家.

下面这些零散信息介绍的并不全面.

---

# Copy-on-write  (RAM)

- `fork()` (linux中的进程创建函数)

  - 快速地创建一个新的进程

  - ... 即使是这个进程使用了许多 GBs 的 RAM

  - 在类似于 e.g. Redis `SAVE`的功能中被频繁地使用,
    &lt;br/&gt; 为了获得一致的镜像（consistent snapshots）

- `mmap()` (将文件映射到指定内存空间) 使用 `MAP_PRIVATE`参数

  - 使用MAP_PRIVATE参数之后 内存段变为私有 改变仅对本进程可见Changes are visible only to current process

  - 私有映射进行得很快 即使对大文件也是这样Private maps are fast, even on huge files

粒度: 1 次一个页面 (通常大小为 4 KB)

---

# Copy-on-write 在内存服务中的应用 (RAM)

它是如何工作的?

- 多亏了 MMU! (Memory Management Unit)

- 每次对内存的访问都需要通过MMU

- MMU可以把对于内存的访问请求 (虚拟的位置.red[¹] + 操作.red[²]) 转化为:

  - 实际的物理地址

  - 或者会返回一个页错误 (*page fault*)


.footnote[
.red[¹] 位置 = 地址 = 指针

.red[²] 操作 = 读、写或执行
]

---

# 页错误（Page faults）

当页错误发生的时候,  MMU 就会通知 OS.

之后会发生什么?

- 要求访问不存在的内存空间 Access to non-existent memory area = `SIGSEGV`
  &lt;br/&gt;.small[(即 "段错误 Segmentation fault" 或是 "请继续学习指针的使用")]

- 访问已换出的内存空间 = 从硬盘中导入
  &lt;br/&gt;.small[(即 "我的程序怎么比以前满了1000倍")]

- 尝试向代码区写入内容 = seg fault (有时会发生)

- 尝试向拷贝区(copy area)写入内容 = 去重操作(deduplication operation)
  &lt;br/&gt;.small[之后如果什么也没有发生就恢复到初始化操作(initial operation)]

- 在非执行区域也可以捕获尝试执行的请求
  &lt;br/&gt;.small[(比如利用栈来避免某些漏洞(stack, to protect against some exploits))]

---

# Copy-on-write 在存储服务中的应用 (disk)

- 最初的应用(个人看法)可能是 镜像服务

  (即是为更新频繁地数据库建立一致的备份 确保在开始备份到备份结束没有发生其他的操作)

- 在外接地存储设备上也可以使用(个人看法)Initially available  on external storage (NAS, SAN)

  (因为这个部分确实很复杂)

--

- 突然,
  &lt;br/&gt;疯狂的 云计算 出现了!

---

# 简要地介绍一下虚拟机.red[¹]

- 基于Copy-on-write存储服务构建系统镜像Put system image on copy-on-write storage

- 为每一台虚拟机创建一个copy-on-write实例

- 如果系统镜像中包含了许多有用地软件 使用虚拟机的时候就不需要再安装额外的东西了

- 每一个额外生成地虚拟机仅仅需要硬盘空间来存储数据就行！

.footnote[.small[.red[¹] 不仅仅是虚拟机，还包括使用netboot的物理机 以及容器 也使用了类似地技术！]]

---

# 可以用在笔记本电脑上的现代copy-on-write技术

(下面地排列并没有按照特定的顺序;列出的内容也并非详尽)

- LVM (Logical Volume Manager) on Linux

- ZFS on Solaris, then FreeBSD, Linux ...

- BTRFS on Linux

- AUFS, UnionMount, overlay.gray[fs] ...

- Virtual disks in VM hypervisors

---

# Copy-on-write 和 Docker 的结合: 一个美丽的爱情故事

- 如果没有 copy-on-write...

  - 一个容器永远无法启动起来 

  - 容器会占据很大的存储空间

- 如果你的笔记本电脑上没有...

  - 在你的Linux主机上 Docker将不再有用

---

class: center, middle

# 我们应该感谢下面这些人:

Junjiro R. Okajima (以及其他的AUFS贡献者)

Chris Mason (以及其他的BTRFS贡献者)

Jeff Bonwick, Matt Ahrens (以及其他的ZFS贡献者)

Miklos Szeredi (以及其他的overlay文件系统的贡献者)

Linux device mapper, thinp target, 等等服务的众多贡献者

.small[... 以及该领域的先驱者们 站在他们的肩上 我们才能看得更远 ]

---

class: center, middle

#  Docker 存储驱动(storage drivers)的历史

---

# 最初源于 AUFS

- Docker公司的前身是dotCloud
  &lt;br/&gt;(PaaS层产品, 类似 Heroku, Cloud Foundry, OpenShift...)

- dotCloud 从2008年开始使用AUFS技术
  &lt;br/&gt;(那时 vserver, then OpenVZ 都开始使用AUFS, 之后是LXC)

- 对于高密度的PaaS 应用 这是一个不错的选择
  &lt;br/&gt;(后面我们会有具体介绍!)

---

# AUFS 并不完美

- 并没有被包括在Linux的主线内核中

- 使用补丁程序曾经是一件激动人心地事情

- ... 特别是与 GRSEC 相结合

- ... 并且加上其他定制的功能比如 `setns()`(将线程与namespace技术再结合)

---

# 一些使用者一直信任AUFS!

- 特别是dotCloud

- Debian 以及 Ubuntu 在他们默认地内核中 使用了AUFS
  &lt;br/&gt;对于Live CD 以及类似的使用情况:

  - 你的根文件系统有 copy-on-write 的功能 并且介于以下两层之间：
    &lt;br/&gt;- 只读媒介 (CD, DVD...) 
    &lt;br/&gt;- 可读写媒介 (disk, USB stick...)

-  Docker 的第一个版本就是针对Ubuntu设计的 (以及 Debian)

---

# 之后 一些人开始信赖 Docker

- Red Hat用户要求在他们最受欢迎的发行版中添加对Docker的支持

- Red Hat Inc. 也想让这一切发生

- ... 他们于是为Docker贡献代码 添加了对 Device Mapper driver的支持

- ... 之后是 BTRFS driver

- ... 接着是 overlay.gray[fs] driver


.footnote[注意:其他的贡献者在这个过程中也提供了很多支持!]

---

class: center, middle

# 特别感谢:

Alexander Larsson

Vincent Batts

\+ 当然还有全部地贡献者和维护者

.small[(上面两位贡献者在最初BTRFS、Device Mapper、以及overlay驱动的开发、支持和维护过程中扮演了极为重要的角色，再次感谢!)]

---

class: center, middle

# 让我们实际来看看

# 每一种存储驱动

# 是如何发挥作用的

---

class: center, middle

# AUFS

---

# 原理

- 按照特定的顺序将多个分支结合在一起 

- 每一个分支都是一个标准的的目录 

- 通常会包括:

  - 至少一个只读分支 (在最低层)

  - 恰好一个读写分支 (再最顶层)

  (也可能有其它的组合方式!)

---

# 当打开一个文件的时候 When opening a file...

- 通过 `O_RDONLY` - 只读的方式来进行访问:

  - 在每一个分支中进行查找 ，从最顶层的分支开始

  - 打开找到的第一个文件

- 通过 `O_WRONLY` 或 `O_RDWR` - 可写入的方式进行访问:

  - 首先在顶层分支中进行查找
    &lt;br/&gt;如果在顶层分支中找到，就打开文件

  - 如果没有找到, 就在其他分支中进行查找;
    &lt;br/&gt;如果在其他分支中找到文件，就把它拷贝到读写分支中(顶层) 之后打开拷贝过去的文件

    如果所打开的文件本身比较大 则向上拷贝的操作可能要多花一些时间
---

# 当删除一个文件的时候...

- 此时会创建一个 *whiteout* 文件
  &lt;br/&gt;(这个与 "tombstones"的概念很类似)

.small[
```
# docker run ubuntu rm /etc/shadow

# ls -la /var/lib/docker/aufs/diff/$(docker ps --no-trunc -lq)/etc
total 8
drwxr-xr-x 2 root root 4096 Jan 27 15:36 .
drwxr-xr-x 5 root root 4096 Jan 27 15:36 ..
-r--r--r-- 2 root root    0 Jan 27 15:36 .wh.shadow
```
]

---

# 在实际操作中

- 容器中AUFS的挂载点是
  &lt;br/&gt;`/var/lib/docker/aufs/mnt/$CONTAINER_ID/`

- 只有在容器运行地时候 文件系统才会被挂载

- AUFS的分支(只读分支和读写分支)的位置在
  &lt;br/&gt;`/var/lib/docker/aufs/diff/$CONTAINER_OR_IMAGE_ID/`

- 所有写入的内容都存在 `/var/lib/docker`目录下

```
dockerhost# df -h /var/lib/docker
Filesystem      Size  Used Avail Use% Mounted on
/dev/xvdb        15G  4.8G  9.5G  34% /mnt
```

---

# 高级选项(Under the hood)

- 查看 AUFS 挂载的相关细节:

  - 在 `/proc/mounts`文件夹下 查看 内部ID

  - 查找`/sys/fs/aufs/si_.../br*`目录

  - 可以把每一个分支 (除去顶层的两个分支)
  &lt;br/&gt;理解成一个镜像

---

# 实际例子(可以看到 除了最上面的两个分支之外 其他的分支都以镜像的形式体现出来)

.small[
```
dockerhost# grep c7af /proc/mounts
none /mnt/.../c7af...a63d aufs rw,relatime,si=2344a8ac4c6c6e55 0 0

dockerhost# grep . /sys/fs/aufs/si_2344a8ac4c6c6e55/br[0-9]*
/sys/fs/aufs/si_2344a8ac4c6c6e55/br0:/mnt/c7af...a63d=rw
/sys/fs/aufs/si_2344a8ac4c6c6e55/br1:/mnt/c7af...a63d-init=ro+wh
/sys/fs/aufs/si_2344a8ac4c6c6e55/br2:/mnt/b39b...a462=ro+wh
/sys/fs/aufs/si_2344a8ac4c6c6e55/br3:/mnt/615c...520e=ro+wh
/sys/fs/aufs/si_2344a8ac4c6c6e55/br4:/mnt/8373...cea2=ro+wh
/sys/fs/aufs/si_2344a8ac4c6c6e55/br5:/mnt/53f8...076f=ro+wh
/sys/fs/aufs/si_2344a8ac4c6c6e55/br6:/mnt/5111...c158=ro+wh

dockerhost# docker inspect --format {{.Image}} c7af
b39b81afc8cae27d6fc7ea89584bad5e0ba792127597d02425eaee9f3aaaa462

dockerhost# docker history -q b39b 
b39b81afc8ca
615c102e2290
837339b91538
53f858aaaf03
511136ea3c5a
```
]

---

# 性能以及调优(Performance, tuning)

- AUFS `mount()` 速度很快 因此创建容器的过程也很快

- 对内存进行读/写操作的速度与原先区别不大

- 但是最初的 `open()` 操作 在写大文件的时候 比较费时

- 在以下方面仍有问题:日志文件(log files),数据库(databases) ...

- 并没有许多需要可以调优的地方(Not much to tune)

- 使用技巧: 当我们构建dotCloud的时候，我们最后把所有重要的数据都放在存储卷上 (putting all important data on *volumes*)

- 当多次启动一个容器的时候，数据只被从硬盘中导入了一次，并且只需要在内存中缓存一次(cached only once in memory)
  (but `dentries` will be duplicated)

---

class: center, middle

# Device Mapper

---

# 序

- Device Mapper 是一个复杂的子系统; 它可以完成以下工作:

  - 磁盘阵列(RAID)

  - 设备编码(encrypted devices)

  - 镜像 (即使用 copy-on-write 机制)

  - 以及其它地一些零碎地功能

- 在Docker的环境下, "Device Mapper" 指的是
  &lt;br/&gt;"the Device Mapper system + its thin provisioning 存储"
  &lt;br/&gt;(有些时候标记为 "thinp")

---

# 原理

- Copy-on-write 机制发生在存储块级别
  &lt;br/&gt;(而不是文件级别)

- 每一个容器额每个镜像都有它们自己的块设备

- 在任何给定地时间，都可能对以下内容进行快照：

  - 已经存在的容器 (创建一个静态的镜像(frozen image))

  - 已经存在的镜像 (从镜像中创建一个文件)

- 如果块设备一直没有被写入:

  - 就认为对应的空间没有内容(it's assumed to be all zeros)

  - 不会在硬盘上被分配空间
  &lt;br/&gt;(所谓的 "thin" provisioning)

---

# 在实际操作中

- 容器挂载点的目录是在
  &lt;br/&gt;`/var/lib/docker/devicemapper/mnt/$CONTAINER_ID/`

- 只有在容器运行的时候 才会被挂载

- 数据存在两个文件中，一个是"data"文件 一个是"metadata" 文件
  &lt;br/&gt;(这个稍后会进行具体介绍)

- 因为我们实际的工作在block的层面上进行，所以对于镜像和容器之间的差别，我们并不全部可见

---

# 高级选项(Under the hood)

- `docker info` 命令会告诉你当前资源池的状态
  &lt;br/&gt;(已用空间/可用空间)

- 使用 `dmsetup ls`列出全部可用设备

- 设备名称以"docker-MAJ:MIN-INO"为前缀

  .small[MAJ, MIN, and INO 这几个简称来源于存储Docker数据的主块设备(block major) 从块设备(block minor) 以及索引结点号(inode number) (为了避免运行多个Docker实例的时候发生冲突 即在Docker中运行Docker)]

- 通过 `dmsetup info`, `dmsetup status`命令可以查看更多的信息

- 镜像有一个内部的数值形式的ID

- `/var/lib/docker/devicemapper/metadata/$CONTAINER_OR_IMAGE_ID`
  &lt;br/&gt;是一个小的JSON文件 用于跟踪记录镜像的ID以及它的大小

---

&lt;!-- # Example --&gt;

# 额外的细节

- 需要两个存储区:
  &lt;br/&gt;一个用于存储数据(data), 另一个用于存储元信息(metadata)

- "data" 也可以理解成 "pool"; 它是一个存储块构成的巨大的资源池
  &lt;br/&gt;(Docker使用尽可能小的存储块，64KB)

- "元信息(metadata)"包含了虚拟地址偏移(在镜像中)到实际物理偏移 (在资源池中)的映射

- 每一次一个新的存储块(或者一个copy-on-write块被写入)
  一个存储块就从资源池中被分配出来

- 当资源池中没有新地存储块时，尝试进行写入的操作就会停止，直到资源池中资源的数量增加(或者写操作被终止)

---

# 性能Performance

- 默认情况下 Docker将数据和元信息都存储在一个由稀疏文件(sparse file)做支撑的loop device上

- 从可用性的角度来看 这一点比较方便
  &lt;br/&gt;(基本上不需要进行配置)

- 从性能的角度来看 可能比较糟糕

  - 每一次 一个容器都向一个新的存储块中写入内
  - 存储块由资源池所分配
  - 并且在向存储块中写入内容时
  - 存储块必须从稀疏文件中分配而来
  - 而稀疏文件系统的性能并不怎么好

---

# 优化Tuning

- 帮自己一个忙：如果你想使用 Device Mapper
  &lt;br/&gt;就把数据(以及元信息)存在实际的设备上(real devices)!

  - 终止Docker进程

  - 修改参数

  - 删除 `/var/lib/docker` (这一点很重要!)

  - 重启Docker进程

.small[
```
docker -d --storage-opt dm.datadev=/dev/sdb1 --storage-opt dm.metadatadev=/dev/sdc1
```
]

---

# 进一步优化More tuning

- 让每一个容器都有它自己的块存储设备

  - 上面有一个真实的文件系统

- 所以你也可以调整 (通过`--storage-opt`参数):

  - 文件系统的类别

  - 文件系统的大小

  - `discard` (这个后面有更多介绍)

- 警告: 当你1000次启动容器的时候,
  &lt;br/&gt;文件会从硬盘中被导入1000次!

---

# 可以参考以下资料

.small[

- https://www.kernel.org/doc/Documentation/device-mapper/thin-provisioning.txt

- https://github.com/docker/docker/tree/master/daemon/graphdriver/devmapper

- http://en.wikipedia.org/wiki/Sparse_file

- http://en.wikipedia.org/wiki/Trim_%28computing%29

]

---

class: center, middle

# BTRFS

---

# 原理

- 在文件系统的级别上完成全部的"copy-on-write"的工作

- 创建.red[¹] 一个 "subvolume" (设想 `mkdir` 操作有极大的权限)

- 对任何的 subvolume 在任何时候生成镜像.red[¹]

- BTRFS 从文件系统的级别而非是存储块设备的级别 将镜像和资源管理池的特性结合在一起

.footnote[.red[¹] 这个操作可以通过`btrfs` 工具来完成.]  

---

# 在实际操作中

- `/var/lib/docker`必须要是一个BTRFS文件系统

- 对于一个容器或者一个镜像 BTRFS 的挂载点位于
  &lt;br/&gt;`/var/lib/docker/btrfs/subvolumes/$CONTAINER_OR_IMAGE_ID/`

- 即使容器没有在运行BTRFS也会被使用

- 数据并没有直接被写入而是先是被写入到日志(it goes to the journal first)
  &lt;br/&gt;(在某些情况下.red[¹], 这可能会影响性能)

.footnote[.red[¹] 即有连续地写入流的情况下.
&lt;br/&gt;性能可能是原先的性能(native performance)的一半]

---

# 高级选项(Under the hood)

- BTRFS 通过把存储设备分成不同的数据块(chunks)来发挥作用

- 一个数据块包含着元标签或者元信息(meta or metadata)

- 你可以用完全部的数据块 (会得到 `No space left on device`的消息)
  &lt;br/&gt;即便如此通过 `df` 命令还是会显示出有可用空间
  &lt;br/&gt;(因为存储块并没有占满所有空间(because the chunks are not full))

- 快速修复:

```
# btrfs filesys balance start -dusage=1 /var/lib/docker
```

---

&lt;!-- # Example --&gt;

# 性能以及调优

- 没有太多可以优化的地方

- 注意 `btrfs filesys show` 命令的输出!

表明文件系统正在正常运行:

.small[
```
# btrfs filesys show
Label: none  uuid: 80b37641-4f4a-4694-968b-39b85c67b934
        Total devices 1 FS bytes used 4.20GiB
        devid    1 size 15.25GiB used 6.04GiB path /dev/xvdc
```
]

下面这种情况是文件块全部占满的情况(没有空闲的文件块) 即使上面没有太多的数据信息：

.small[
```
# btrfs filesys show
Label: none  uuid: de060d4c-99b6-4da0-90fa-fb47166db38b
        Total devices 1 FS bytes used 2.51GiB
        devid    1 size 87.50GiB used 87.50GiB path /dev/xvdc
```
]

---

class: center, middle

# Overlay.gray[fs]

---

# 序

为何将.gray[fs]标记为灰色?

- 它曾经被称为 `overlayfs`

- 当并入到 3.18 版本之后, 名称就变为了 `overlay`

---

# 原理

- 这个文件系统与AUFS很类似，只有很少的地方有差别:

  - 只有两个分支only two branches (被称为文件层("layers"))

  - 但是分支只能进行自我覆盖

---

# 在实际操作中

- 你需要内核版本为 3.18

- 在Ubuntu.red[¹]上:

  - go to http://kernel.ubuntu.com/~kernel-ppa/mainline/

  - locate the most recent directory, e.g. `v3.18.4-vidi`

  - download the `linux-image-..._amd64.deb` file

  - `dpkg -i` that file, reboot, enjoy

.footnote[.red[¹]
对于其他发行版的适配工作就交给读者来完成
]

---

# 高级选项(Under the hood)

- 镜像以及容器在以下目录下被具体化
  &lt;br/&gt;`/var/lib/docker/overlay/$ID_OF_CONTAINER_OR_IMAGE`

- 镜像只有一个'root'子目录
  &lt;br/&gt;(包含了root FS)

- 容器含有:

  - `lower-id` → 文件包含镜像的ID 

  - `merged/` → 容器的挂载点(需要在运行的时候)

  - `upper/` → 容器的读写层

  - `work/` → 用于原子拷贝操作的临时的空间

---

&lt;!-- # Example --&gt;

# 性能以及调优Performance, tuning

- 目前阶段没有什么需要调优的地方

- 性能方面应该与AUFS比较类似:

  - 向上拷贝速度较慢

  - 对内存资源的利用较好

- 具体实现细节:
  &lt;br/&gt;同样的文件在不同镜像之间通过硬链接的方式连在一起
  &lt;br/&gt;(这样可以避免进行复杂的覆盖( avoids doing composed overlays))
---

class: center, middle

# VFS

---

# 原理

- 没有 copy on write 机制 Docker每次都要进行全部的拷贝!

- 并没有依赖于这些及为花哨的内核机

- 当将Docker移植到一个新的平台上的时候 这是一个不错的选择
  &lt;br/&gt;(think FreeBSD, Solaris...)

- 空间利用率低 速度慢 

---

# 在实际操作中

- 在产品安装的时候可能比较有用 

  (如果你不想/不能 使用 存储卷，并且不想/不能使用任何 copy-on-write机制)

---

class: center, middle

# 结论

---

class: center, middle

关于Docker存储驱动，最棒的就是，用户可以有如此多的选择。



---

# 哪种情况应该选择哪种文件系统？(What do, what do?)

- 如果你做的是PaaS或使用其他的密集环境(high-density environment):

  - AUFS (要求内核提供对应的支持)

  - overlayfs (在其他的情况下)

- 如果你把一个大的可写的文件放在CoW文件系统:

  - BTRFS or Device Mapper (选择一个你最了解的)


---

class: center, middle

# 总而言之

---

class: center, middle
在你的产品上
&lt;br/&gt;最好的存储驱动 
&lt;br/&gt;是你的团队有最多的实际操作经验的那一种

---

class: center, middle

# 特别内容(Bonus track)

## `discard` and `TRIM`

---

# `TRIM`

- 发送给SSD硬盘的内容 告诉SSD硬盘Command sent to a SSD disk, to tell it:
  &lt;br/&gt;"这个存储块已经不在被使用了"

- 这个功能很有用 因为对于SSD来说 *erase*的代价非常高 (速度很慢)

- 允许SSD 来提前预先擦除cells
   &lt;br/&gt;(并不是即时的 而是在 写操作之前)

- 这也对支持 copy-on-write 机制的存储有意义
  &lt;br/&gt;(如果/当 所有的镜像都作为一个trimmed block 那么它就可以被释放)

---

# `discard`

- 文件系统选择的含义:
  &lt;br/&gt;*"can I has `TRIM` on this pls"*

- Can be enabled/disabled at any time

- 文件系统也可以使用`fstrim`通过手工地方式被修剪(be trimmed)
  &lt;br/&gt;(即使对于已经挂载了的文件系统)

---

#  `discard` 的困惑

- `discard` 在 Device Mapper + loopback devices 上工作

- ... 但是在 loopback devices 上速度特别慢
  &lt;br/&gt;(在容器或者镜像删除之后 loopback文件需要被"re-sparsified" 这是一个特别慢的操作)
- 你可以根据自己的偏好将其打开或者关闭

---

class: center, middle

# 以上就是全部的内容!

---

# Questions?

- To get those slides, follow me on twitter: [@jpetazzo](https://twitter.com/jpetazzo)
  &lt;br/&gt;.small[Yes, this is a particularly evil scheme to increase my follower count]

- Also .red[WE ARE HIRING!]

  - infrastructure (servers, metal, and stuff)

  - QA (get paid to break things!)

  - Python (Docker Hub and more)

  - Go (Docker Engine and more)

- Send your resume to jobs@docker.com 
  &lt;br/&gt;.gray[Do it do it do it NOW NOW!]

    </textarea>
    <script src="./Docker Storage Drivers_files/remark-0.5.9.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create();
    </script><div class="remark-notes-area">
  <div class="remark-toolbar">
    <a class="remark-toolbar-link" href="http://static.dockerone.com/ppt/filedriver.html#increase">+</a>
    <a class="remark-toolbar-link" href="http://static.dockerone.com/ppt/filedriver.html#decrease">-</a>
  </div>
  <div class="remark-notes"></div>
</div>
<div class="remark-slides-area">

<div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>深入</h1>
<h1>Docker 存储驱动</h1>
<h2>*</h2>
<h2>Jérôme Petazzoni - @jpetazzo</h2>
<h2>Docker - @docker</h2>
<div class="remark-slide-number">1 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>我是谁</h1>
<ul>
<li><p><a href="https://twitter.com/jpetazzo">@jpetazzo</a></p>
</li>
<li><p>Tamer of Unicorns and Tinkerer Extraordinaire<span class="red">¹</span></p>
</li>
<li><p>脾气暴躁的法国DevOps人员 喜爱Shell scripts
<br> <span class="small">Go Away Or I Will Replace You Wiz Le Very Small Shell Script</span></p>
</li>
<li><p>有一些容器技术的使用经验
<br> (负责 dotCloud PaaS 的构建和运维工作)</p>
</li>
<li><p>打算使用Markdown来制作ppt(这的确是个好主意)</p>
</li>
</ul>
<p><span class="footnote"><span class="red">¹</span> 在的个人名片上至少标记着其中一项</span></p>
<div class="remark-slide-number">2 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>大纲</h1>
<ul>
<li><p>Docker速览</p>
</li>
<li><p>简要介绍 copy-on-write</p>
</li>
<li><p>Docker 存储驱动的发展历史</p>
</li>
<li><p>AUFS, BTRFS, Device Mapper, Overlay<span class="gray">fs</span>, VFS</p>
</li>
<li><p>结论</p>
</li>
</ul>
<div class="remark-slide-number">3 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>Docker速览</h1>
<div class="remark-slide-number">4 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>Docker是什么?</h1>
<ul>
<li><p>一个由 <em>Docker Engine</em> 和 <em>Docker Hub</em> 组成的平台</p>
</li>
<li><p><em>Docker Engine</em>指的是容器的运行时环境</p>
</li>
<li><p>Docker是开源的 由Go语言所开发 
<br> <span class="small"><span class="small"> <a href="http://www.slideshare.net/jpetazzo/docker-and-go-why-did-we-decide-to-write-docker-in-go">http://www.slideshare.net/jpetazzo/docker-and-go-why-did-we-decide-to-write-docker-in-go</a> </span></span></p>
</li>
<li><p>它是一个守护进程, 被REST API控制</p>
</li>
<li><p>还是不清楚，它到底是什么!?
<br> 这周五 参与在线的 "Docker 101" 会议:
<br> <span class="small"> <a href="http://www.meetup.com/Docker-Online-Meetup/events/219867087/">http://www.meetup.com/Docker-Online-Meetup/events/219867087/</a> </span></p>
</li>
</ul>
<div class="remark-slide-number">5 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>如果你在实际工作中从未使用过Docker 以下内容可能会帮到你 ...</h1>
<p>This will help!</p>
<div class="small">
<pre><code class="remark-code">jpetazzo@tarrasque:~$ docker run -ti python bash
root@75d4bf28c8a5:/# pip install IPython
Downloading/unpacking IPython
  Downloading ipython-2.3.1-py3-none-any.whl (2.8MB): 2.8MB downloaded
Installing collected packages: IPython
Successfully installed IPython
Cleaning up...
root@75d4bf28c8a5:/# ipython
Python 3.4.2 (default, Jan 22 2015, 07:33:45) 
Type "copyright", "credits" or "license" for more information.

IPython 2.3.1 -- An enhanced Interactive Python.
?         -&gt; Introduction and overview of IPython's features.
%quickref -&gt; Quick reference.
help      -&gt; Python's own help system.
object?   -&gt; Details about 'object', use 'object??' for extra details.

In [1]:</code></pre>
</div>
<div class="remark-slide-number">6 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>这个过程中 发生了什么?</h1>
<ul>
<li><p>我们创建了一个 容器 (~相当于一个轻量级的虚拟机),
<br> 它拥有:</p>
<ul>
<li>文件系统 (基于一个 <code class="remark-code">python</code> 镜像)</li>
<li>网络栈（network stack）</li>
<li>进程空间</li>
</ul>
</li>
<li><p>我们通过一个 <code class="remark-code">bash</code> 进程来启动
<br> (no <code class="remark-code">init</code>, no <code class="remark-code">systemd</code>, no problem)</p>
</li>
<li><p>我们通过pip安装了IPython, 并且将它运行起来</p>
</li>
</ul>
<div class="remark-slide-number">7 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>在这个过程中哪些<span class="underline">没有</span>发生 ?</h1>
<ul>
<li>我们并没有完全地拷贝 <code class="remark-code">python</code> 镜像</li>
</ul>
<p>安装过程在 容器 中完成, 而并非是在 镜像 中完成:</p>
<ul>
<li><p>我们并没有修改 <code class="remark-code">python</code> 镜像本身</p>
</li>
<li><p>我们并没有影响其他容器的运行
<br> (当前使用的镜像或者其他的镜像)</p>
</li>
</ul>
<div class="remark-slide-number">8 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>为什么这个问题很重要?</h1>
<ul>
<li><p>我们使用的是 <em>copy-on-write</em> 机制
<br> (Docker 帮助我们进行处理)</p>
</li>
<li><p>我们并没有对'python'镜像进行完整地拷贝，我们仅仅是跟踪容器相对于镜像所发生的变化</p>
</li>
<li><p>这个过程节省了大量的硬盘空间 (1 个容器 = 小于 1 MB 的存储空间)</p>
</li>
<li><p>节省了大量的时间 (1 个容器 = 小于 0.1s 的启动时间)</p>
</li>
</ul>
<div class="remark-slide-number">9 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>对于 copy-on-write 的简要介绍</h1>
<div class="remark-slide-number">10 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>历史背景</h1>
<p>注意: 我并非是一个历史学家.</p>
<p>下面这些零散信息介绍的并不全面.</p>
<div class="remark-slide-number">11 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>Copy-on-write  (RAM)</h1>
<ul>
<li><p><code class="remark-code">fork()</code> (linux中的进程创建函数)</p>
<ul>
<li><p>快速地创建一个新的进程</p>
</li>
<li><p>... 即使是这个进程使用了许多 GBs 的 RAM</p>
</li>
<li><p>在类似于 e.g. Redis <code class="remark-code">SAVE</code>的功能中被频繁地使用,
<br> 为了获得一致的镜像（consistent snapshots）</p>
</li>
</ul>
</li>
<li><p><code class="remark-code">mmap()</code> (将文件映射到指定内存空间) 使用 <code class="remark-code">MAP_PRIVATE</code>参数</p>
<ul>
<li><p>使用MAP_PRIVATE参数之后 内存段变为私有 改变仅对本进程可见Changes are visible only to current process</p>
</li>
<li><p>私有映射进行得很快 即使对大文件也是这样Private maps are fast, even on huge files</p>
</li>
</ul>
</li>
</ul>
<p>粒度: 1 次一个页面 (通常大小为 4 KB)</p>
<div class="remark-slide-number">12 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>Copy-on-write 在内存服务中的应用 (RAM)</h1>
<p>它是如何工作的?</p>
<ul>
<li><p>多亏了 MMU! (Memory Management Unit)</p>
</li>
<li><p>每次对内存的访问都需要通过MMU</p>
</li>
<li><p>MMU可以把对于内存的访问请求 (虚拟的位置<span class="red">¹</span> + 操作<span class="red">²</span>) 转化为:</p>
<ul>
<li><p>实际的物理地址</p>
</li>
<li><p>或者会返回一个页错误 (<em>page fault</em>)</p>
</li>
</ul>
</li>
</ul>
<div class="footnote">
<span class="red">¹</span> 位置 = 地址 = 指针
<p><span class="red">²</span> 操作 = 读、写或执行
</p></div>
<div class="remark-slide-number">13 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>页错误（Page faults）</h1>
<p>当页错误发生的时候,  MMU 就会通知 OS.</p>
<p>之后会发生什么?</p>
<ul>
<li><p>要求访问不存在的内存空间 Access to non-existent memory area = <code class="remark-code">SIGSEGV</code>
<br><span class="small">(即 "段错误 Segmentation fault" 或是 "请继续学习指针的使用")</span></p>
</li>
<li><p>访问已换出的内存空间 = 从硬盘中导入
<br><span class="small">(即 "我的程序怎么比以前满了1000倍")</span></p>
</li>
<li><p>尝试向代码区写入内容 = seg fault (有时会发生)</p>
</li>
<li><p>尝试向拷贝区(copy area)写入内容 = 去重操作(deduplication operation)
<br><span class="small">之后如果什么也没有发生就恢复到初始化操作(initial operation)</span></p>
</li>
<li><p>在非执行区域也可以捕获尝试执行的请求
<br><span class="small">(比如利用栈来避免某些漏洞(stack, to protect against some exploits))</span></p>
</li>
</ul>
<div class="remark-slide-number">14 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>Copy-on-write 在存储服务中的应用 (disk)</h1>
<ul>
<li><p>最初的应用(个人看法)可能是 镜像服务</p>
<p>(即是为更新频繁地数据库建立一致的备份 确保在开始备份到备份结束没有发生其他的操作)</p>
</li>
<li><p>在外接地存储设备上也可以使用(个人看法)Initially available  on external storage (NAS, SAN)</p>
<p>(因为这个部分确实很复杂)</p>
</li>
</ul>
<div class="remark-slide-number">15 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>Copy-on-write 在存储服务中的应用 (disk)</h1>
<ul>
<li><p>最初的应用(个人看法)可能是 镜像服务</p>
<p>(即是为更新频繁地数据库建立一致的备份 确保在开始备份到备份结束没有发生其他的操作)</p>
</li>
<li><p>在外接地存储设备上也可以使用(个人看法)Initially available  on external storage (NAS, SAN)</p>
<p>(因为这个部分确实很复杂)</p>
</li>
<li><p>突然,
<br>疯狂的 云计算 出现了!</p>
</li>
</ul>
<div class="remark-slide-number">16 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>简要地介绍一下虚拟机<span class="red">¹</span></h1>
<ul>
<li><p>基于Copy-on-write存储服务构建系统镜像Put system image on copy-on-write storage</p>
</li>
<li><p>为每一台虚拟机创建一个copy-on-write实例</p>
</li>
<li><p>如果系统镜像中包含了许多有用地软件 使用虚拟机的时候就不需要再安装额外的东西了</p>
</li>
<li><p>每一个额外生成地虚拟机仅仅需要硬盘空间来存储数据就行！</p>
</li>
</ul>
<p><span class="footnote"><span class="small"><span class="red">¹</span> 不仅仅是虚拟机，还包括使用netboot的物理机 以及容器 也使用了类似地技术！</span></span></p>
<div class="remark-slide-number">17 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>可以用在笔记本电脑上的现代copy-on-write技术</h1>
<p>(下面地排列并没有按照特定的顺序;列出的内容也并非详尽)</p>
<ul>
<li><p>LVM (Logical Volume Manager) on Linux</p>
</li>
<li><p>ZFS on Solaris, then FreeBSD, Linux ...</p>
</li>
<li><p>BTRFS on Linux</p>
</li>
<li><p>AUFS, UnionMount, overlay<span class="gray">fs</span> ...</p>
</li>
<li><p>Virtual disks in VM hypervisors</p>
</li>
</ul>
<div class="remark-slide-number">18 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>Copy-on-write 和 Docker 的结合: 一个美丽的爱情故事</h1>
<ul>
<li><p>如果没有 copy-on-write...</p>
<ul>
<li><p>一个容器永远无法启动起来 </p>
</li>
<li><p>容器会占据很大的存储空间</p>
</li>
</ul>
</li>
<li><p>如果你的笔记本电脑上没有...</p>
<ul>
<li>在你的Linux主机上 Docker将不再有用</li>
</ul>
</li>
</ul>
<div class="remark-slide-number">19 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>我们应该感谢下面这些人:</h1>
<p>Junjiro R. Okajima (以及其他的AUFS贡献者)</p>
<p>Chris Mason (以及其他的BTRFS贡献者)</p>
<p>Jeff Bonwick, Matt Ahrens (以及其他的ZFS贡献者)</p>
<p>Miklos Szeredi (以及其他的overlay文件系统的贡献者)</p>
<p>Linux device mapper, thinp target, 等等服务的众多贡献者</p>
<p><span class="small">... 以及该领域的先驱者们 站在他们的肩上 我们才能看得更远 </span></p>
<div class="remark-slide-number">20 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>Docker 存储驱动(storage drivers)的历史</h1>
<div class="remark-slide-number">21 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>最初源于 AUFS</h1>
<ul>
<li><p>Docker公司的前身是dotCloud
<br>(PaaS层产品, 类似 Heroku, Cloud Foundry, OpenShift...)</p>
</li>
<li><p>dotCloud 从2008年开始使用AUFS技术
<br>(那时 vserver, then OpenVZ 都开始使用AUFS, 之后是LXC)</p>
</li>
<li><p>对于高密度的PaaS 应用 这是一个不错的选择
<br>(后面我们会有具体介绍!)</p>
</li>
</ul>
<div class="remark-slide-number">22 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>AUFS 并不完美</h1>
<ul>
<li><p>并没有被包括在Linux的主线内核中</p>
</li>
<li><p>使用补丁程序曾经是一件激动人心地事情</p>
</li>
<li><p>... 特别是与 GRSEC 相结合</p>
</li>
<li><p>... 并且加上其他定制的功能比如 <code class="remark-code">setns()</code>(将线程与namespace技术再结合)</p>
</li>
</ul>
<div class="remark-slide-number">23 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>一些使用者一直信任AUFS!</h1>
<ul>
<li><p>特别是dotCloud</p>
</li>
<li><p>Debian 以及 Ubuntu 在他们默认地内核中 使用了AUFS
<br>对于Live CD 以及类似的使用情况:</p>
<ul>
<li>你的根文件系统有 copy-on-write 的功能 并且介于以下两层之间：
<br>- 只读媒介 (CD, DVD...) 
<br>- 可读写媒介 (disk, USB stick...)</li>
</ul>
</li>
<li><p>Docker 的第一个版本就是针对Ubuntu设计的 (以及 Debian)</p>
</li>
</ul>
<div class="remark-slide-number">24 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>之后 一些人开始信赖 Docker</h1>
<ul>
<li><p>Red Hat用户要求在他们最受欢迎的发行版中添加对Docker的支持</p>
</li>
<li><p>Red Hat Inc. 也想让这一切发生</p>
</li>
<li><p>... 他们于是为Docker贡献代码 添加了对 Device Mapper driver的支持</p>
</li>
<li><p>... 之后是 BTRFS driver</p>
</li>
<li><p>... 接着是 overlay<span class="gray">fs</span> driver</p>
</li>
</ul>
<p><span class="footnote">注意:其他的贡献者在这个过程中也提供了很多支持!</span></p>
<div class="remark-slide-number">25 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>特别感谢:</h1>
<p>Alexander Larsson</p>
<p>Vincent Batts</p>
<p>+ 当然还有全部地贡献者和维护者</p>
<p><span class="small">(上面两位贡献者在最初BTRFS、Device Mapper、以及overlay驱动的开发、支持和维护过程中扮演了极为重要的角色，再次感谢!)</span></p>
<div class="remark-slide-number">26 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>让我们实际来看看</h1>
<h1>每一种存储驱动</h1>
<h1>是如何发挥作用的</h1>
<div class="remark-slide-number">27 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>AUFS</h1>
<div class="remark-slide-number">28 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>原理</h1>
<ul>
<li><p>按照特定的顺序将多个分支结合在一起 </p>
</li>
<li><p>每一个分支都是一个标准的的目录 </p>
</li>
<li><p>通常会包括:</p>
<ul>
<li><p>至少一个只读分支 (在最低层)</p>
</li>
<li><p>恰好一个读写分支 (再最顶层)</p>
</li>
</ul>
<p>(也可能有其它的组合方式!)</p>
</li>
</ul>
<div class="remark-slide-number">29 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>当打开一个文件的时候 When opening a file...</h1>
<ul>
<li><p>通过 <code class="remark-code">O_RDONLY</code> - 只读的方式来进行访问:</p>
<ul>
<li><p>在每一个分支中进行查找 ，从最顶层的分支开始</p>
</li>
<li><p>打开找到的第一个文件</p>
</li>
</ul>
</li>
<li><p>通过 <code class="remark-code">O_WRONLY</code> 或 <code class="remark-code">O_RDWR</code> - 可写入的方式进行访问:</p>
<ul>
<li><p>首先在顶层分支中进行查找
<br>如果在顶层分支中找到，就打开文件</p>
</li>
<li><p>如果没有找到, 就在其他分支中进行查找;
<br>如果在其他分支中找到文件，就把它拷贝到读写分支中(顶层) 之后打开拷贝过去的文件</p>
<p>如果所打开的文件本身比较大 则向上拷贝的操作可能要多花一些时间</p>
</li>
</ul>
</li>
</ul>
<div class="remark-slide-number">30 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>当删除一个文件的时候...</h1>
<ul>
<li>此时会创建一个 <em>whiteout</em> 文件
<br>(这个与 "tombstones"的概念很类似)</li>
</ul>
<div class="small">
<pre><code class="remark-code"># docker run ubuntu rm /etc/shadow

# ls -la /var/lib/docker/aufs/diff/$(docker ps --no-trunc -lq)/etc
total 8
drwxr-xr-x 2 root root 4096 Jan 27 15:36 .
drwxr-xr-x 5 root root 4096 Jan 27 15:36 ..
-r--r--r-- 2 root root    0 Jan 27 15:36 .wh.shadow</code></pre>
</div>
<div class="remark-slide-number">31 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>在实际操作中</h1>
<ul>
<li><p>容器中AUFS的挂载点是
<br><code class="remark-code">/var/lib/docker/aufs/mnt/$CONTAINER_ID/</code></p>
</li>
<li><p>只有在容器运行地时候 文件系统才会被挂载</p>
</li>
<li><p>AUFS的分支(只读分支和读写分支)的位置在
<br><code class="remark-code">/var/lib/docker/aufs/diff/$CONTAINER_OR_IMAGE_ID/</code></p>
</li>
<li><p>所有写入的内容都存在 <code class="remark-code">/var/lib/docker</code>目录下</p>
</li>
</ul>
<pre><code class="remark-code">dockerhost# df -h /var/lib/docker
Filesystem      Size  Used Avail Use% Mounted on
/dev/xvdb        15G  4.8G  9.5G  34% /mnt</code></pre>
<div class="remark-slide-number">32 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>高级选项(Under the hood)</h1>
<ul>
<li><p>查看 AUFS 挂载的相关细节:</p>
<ul>
<li><p>在 <code class="remark-code">/proc/mounts</code>文件夹下 查看 内部ID</p>
</li>
<li><p>查找<code class="remark-code">/sys/fs/aufs/si_.../br*</code>目录</p>
</li>
<li><p>可以把每一个分支 (除去顶层的两个分支)
<br>理解成一个镜像</p>
</li>
</ul>
</li>
</ul>
<div class="remark-slide-number">33 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>实际例子(可以看到 除了最上面的两个分支之外 其他的分支都以镜像的形式体现出来)</h1>
<div class="small">
<pre><code class="remark-code">dockerhost# grep c7af /proc/mounts
none /mnt/.../c7af...a63d aufs rw,relatime,si=2344a8ac4c6c6e55 0 0

dockerhost# grep . /sys/fs/aufs/si_2344a8ac4c6c6e55/br[0-9]*
/sys/fs/aufs/si_2344a8ac4c6c6e55/br0:/mnt/c7af...a63d=rw
/sys/fs/aufs/si_2344a8ac4c6c6e55/br1:/mnt/c7af...a63d-init=ro+wh
/sys/fs/aufs/si_2344a8ac4c6c6e55/br2:/mnt/b39b...a462=ro+wh
/sys/fs/aufs/si_2344a8ac4c6c6e55/br3:/mnt/615c...520e=ro+wh
/sys/fs/aufs/si_2344a8ac4c6c6e55/br4:/mnt/8373...cea2=ro+wh
/sys/fs/aufs/si_2344a8ac4c6c6e55/br5:/mnt/53f8...076f=ro+wh
/sys/fs/aufs/si_2344a8ac4c6c6e55/br6:/mnt/5111...c158=ro+wh

dockerhost# docker inspect --format {{.Image}} c7af
b39b81afc8cae27d6fc7ea89584bad5e0ba792127597d02425eaee9f3aaaa462

dockerhost# docker history -q b39b 
b39b81afc8ca
615c102e2290
837339b91538
53f858aaaf03
511136ea3c5a</code></pre>
</div>
<div class="remark-slide-number">34 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>性能以及调优(Performance, tuning)</h1>
<ul>
<li><p>AUFS <code class="remark-code">mount()</code> 速度很快 因此创建容器的过程也很快</p>
</li>
<li><p>对内存进行读/写操作的速度与原先区别不大</p>
</li>
<li><p>但是最初的 <code class="remark-code">open()</code> 操作 在写大文件的时候 比较费时</p>
</li>
<li><p>在以下方面仍有问题:日志文件(log files),数据库(databases) ...</p>
</li>
<li><p>并没有许多需要可以调优的地方(Not much to tune)</p>
</li>
<li><p>使用技巧: 当我们构建dotCloud的时候，我们最后把所有重要的数据都放在存储卷上 (putting all important data on <em>volumes</em>)</p>
</li>
<li><p>当多次启动一个容器的时候，数据只被从硬盘中导入了一次，并且只需要在内存中缓存一次(cached only once in memory)
(but <code class="remark-code">dentries</code> will be duplicated)</p>
</li>
</ul>
<div class="remark-slide-number">35 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>Device Mapper</h1>
<div class="remark-slide-number">36 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>序</h1>
<ul>
<li><p>Device Mapper 是一个复杂的子系统; 它可以完成以下工作:</p>
<ul>
<li><p>磁盘阵列(RAID)</p>
</li>
<li><p>设备编码(encrypted devices)</p>
</li>
<li><p>镜像 (即使用 copy-on-write 机制)</p>
</li>
<li><p>以及其它地一些零碎地功能</p>
</li>
</ul>
</li>
<li><p>在Docker的环境下, "Device Mapper" 指的是
<br>"the Device Mapper system + its thin provisioning 存储"
<br>(有些时候标记为 "thinp")</p>
</li>
</ul>
<div class="remark-slide-number">37 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>原理</h1>
<ul>
<li><p>Copy-on-write 机制发生在存储块级别
<br>(而不是文件级别)</p>
</li>
<li><p>每一个容器额每个镜像都有它们自己的块设备</p>
</li>
<li><p>在任何给定地时间，都可能对以下内容进行快照：</p>
<ul>
<li><p>已经存在的容器 (创建一个静态的镜像(frozen image))</p>
</li>
<li><p>已经存在的镜像 (从镜像中创建一个文件)</p>
</li>
</ul>
</li>
<li><p>如果块设备一直没有被写入:</p>
<ul>
<li><p>就认为对应的空间没有内容(it's assumed to be all zeros)</p>
</li>
<li><p>不会在硬盘上被分配空间
<br>(所谓的 "thin" provisioning)</p>
</li>
</ul>
</li>
</ul>
<div class="remark-slide-number">38 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>在实际操作中</h1>
<ul>
<li><p>容器挂载点的目录是在
<br><code class="remark-code">/var/lib/docker/devicemapper/mnt/$CONTAINER_ID/</code></p>
</li>
<li><p>只有在容器运行的时候 才会被挂载</p>
</li>
<li><p>数据存在两个文件中，一个是"data"文件 一个是"metadata" 文件
<br>(这个稍后会进行具体介绍)</p>
</li>
<li><p>因为我们实际的工作在block的层面上进行，所以对于镜像和容器之间的差别，我们并不全部可见</p>
</li>
</ul>
<div class="remark-slide-number">39 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>高级选项(Under the hood)</h1>
<ul>
<li><p><code class="remark-code">docker info</code> 命令会告诉你当前资源池的状态
<br>(已用空间/可用空间)</p>
</li>
<li><p>使用 <code class="remark-code">dmsetup ls</code>列出全部可用设备</p>
</li>
<li><p>设备名称以"docker-MAJ:MIN-INO"为前缀</p>
<p><span class="small">MAJ, MIN, and INO 这几个简称来源于存储Docker数据的主块设备(block major) 从块设备(block minor) 以及索引结点号(inode number) (为了避免运行多个Docker实例的时候发生冲突 即在Docker中运行Docker)</span></p>
</li>
<li><p>通过 <code class="remark-code">dmsetup info</code>, <code class="remark-code">dmsetup status</code>命令可以查看更多的信息</p>
</li>
<li><p>镜像有一个内部的数值形式的ID</p>
</li>
<li><p><code class="remark-code">/var/lib/docker/devicemapper/metadata/$CONTAINER_OR_IMAGE_ID</code>
<br>是一个小的JSON文件 用于跟踪记录镜像的ID以及它的大小</p>
</li>
</ul>
<div class="remark-slide-number">40 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><p><!-- # Example --></p>
<h1>额外的细节</h1>
<ul>
<li><p>需要两个存储区:
<br>一个用于存储数据(data), 另一个用于存储元信息(metadata)</p>
</li>
<li><p>"data" 也可以理解成 "pool"; 它是一个存储块构成的巨大的资源池
<br>(Docker使用尽可能小的存储块，64KB)</p>
</li>
<li><p>"元信息(metadata)"包含了虚拟地址偏移(在镜像中)到实际物理偏移 (在资源池中)的映射</p>
</li>
<li><p>每一次一个新的存储块(或者一个copy-on-write块被写入)
一个存储块就从资源池中被分配出来</p>
</li>
<li><p>当资源池中没有新地存储块时，尝试进行写入的操作就会停止，直到资源池中资源的数量增加(或者写操作被终止)</p>
</li>
</ul>
<div class="remark-slide-number">41 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>性能Performance</h1>
<ul>
<li><p>默认情况下 Docker将数据和元信息都存储在一个由稀疏文件(sparse file)做支撑的loop device上</p>
</li>
<li><p>从可用性的角度来看 这一点比较方便
<br>(基本上不需要进行配置)</p>
</li>
<li><p>从性能的角度来看 可能比较糟糕</p>
<ul>
<li>每一次 一个容器都向一个新的存储块中写入内</li>
<li>存储块由资源池所分配</li>
<li>并且在向存储块中写入内容时</li>
<li>存储块必须从稀疏文件中分配而来</li>
<li>而稀疏文件系统的性能并不怎么好</li>
</ul>
</li>
</ul>
<div class="remark-slide-number">42 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>优化Tuning</h1>
<ul>
<li><p>帮自己一个忙：如果你想使用 Device Mapper
<br>就把数据(以及元信息)存在实际的设备上(real devices)!</p>
<ul>
<li><p>终止Docker进程</p>
</li>
<li><p>修改参数</p>
</li>
<li><p>删除 <code class="remark-code">/var/lib/docker</code> (这一点很重要!)</p>
</li>
<li><p>重启Docker进程</p>
</li>
</ul>
</li>
</ul>
<div class="small">
<pre><code class="remark-code">docker -d --storage-opt dm.datadev=/dev/sdb1 --storage-opt dm.metadatadev=/dev/sdc1</code></pre>
</div>
<div class="remark-slide-number">43 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>进一步优化More tuning</h1>
<ul>
<li><p>让每一个容器都有它自己的块存储设备</p>
<ul>
<li>上面有一个真实的文件系统</li>
</ul>
</li>
<li><p>所以你也可以调整 (通过<code class="remark-code">--storage-opt</code>参数):</p>
<ul>
<li><p>文件系统的类别</p>
</li>
<li><p>文件系统的大小</p>
</li>
<li><p><code class="remark-code">discard</code> (这个后面有更多介绍)</p>
</li>
</ul>
</li>
<li><p>警告: 当你1000次启动容器的时候,
<br>文件会从硬盘中被导入1000次!</p>
</li>
</ul>
<div class="remark-slide-number">44 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>可以参考以下资料</h1>
<div class="small">
<ul>
<li><p><a href="https://www.kernel.org/doc/Documentation/device-mapper/thin-provisioning.txt">https://www.kernel.org/doc/Documentation/device-mapper/thin-provisioning.txt</a></p>
</li>
<li><p><a href="https://github.com/docker/docker/tree/master/daemon/graphdriver/devmapper">https://github.com/docker/docker/tree/master/daemon/graphdriver/devmapper</a></p>
</li>
<li><p><a href="http://en.wikipedia.org/wiki/Sparse_file">http://en.wikipedia.org/wiki/Sparse_file</a></p>
</li>
<li><p><a href="http://en.wikipedia.org/wiki/Trim_%28computing%29">http://en.wikipedia.org/wiki/Trim_%28computing%29</a></p>
</li>
</ul>
</div>
<div class="remark-slide-number">45 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>BTRFS</h1>
<div class="remark-slide-number">46 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>原理</h1>
<ul>
<li><p>在文件系统的级别上完成全部的"copy-on-write"的工作</p>
</li>
<li><p>创建<span class="red">¹</span> 一个 "subvolume" (设想 <code class="remark-code">mkdir</code> 操作有极大的权限)</p>
</li>
<li><p>对任何的 subvolume 在任何时候生成镜像<span class="red">¹</span></p>
</li>
<li><p>BTRFS 从文件系统的级别而非是存储块设备的级别 将镜像和资源管理池的特性结合在一起</p>
</li>
</ul>
<p><span class="footnote"><span class="red">¹</span> 这个操作可以通过<code class="remark-code">btrfs</code> 工具来完成.</span>  </p>
<div class="remark-slide-number">47 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>在实际操作中</h1>
<ul>
<li><p><code class="remark-code">/var/lib/docker</code>必须要是一个BTRFS文件系统</p>
</li>
<li><p>对于一个容器或者一个镜像 BTRFS 的挂载点位于
<br><code class="remark-code">/var/lib/docker/btrfs/subvolumes/$CONTAINER_OR_IMAGE_ID/</code></p>
</li>
<li><p>即使容器没有在运行BTRFS也会被使用</p>
</li>
<li><p>数据并没有直接被写入而是先是被写入到日志(it goes to the journal first)
<br>(在某些情况下<span class="red">¹</span>, 这可能会影响性能)</p>
</li>
</ul>
<div class="footnote"><span class="red">¹</span> 即有连续地写入流的情况下.
<br>性能可能是原先的性能(native performance)的一半</div>
<div class="remark-slide-number">48 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>高级选项(Under the hood)</h1>
<ul>
<li><p>BTRFS 通过把存储设备分成不同的数据块(chunks)来发挥作用</p>
</li>
<li><p>一个数据块包含着元标签或者元信息(meta or metadata)</p>
</li>
<li><p>你可以用完全部的数据块 (会得到 <code class="remark-code">No space left on device</code>的消息)
<br>即便如此通过 <code class="remark-code">df</code> 命令还是会显示出有可用空间
<br>(因为存储块并没有占满所有空间(because the chunks are not full))</p>
</li>
<li><p>快速修复:</p>
</li>
</ul>
<pre><code class="remark-code"># btrfs filesys balance start -dusage=1 /var/lib/docker</code></pre>
<div class="remark-slide-number">49 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><p><!-- # Example --></p>
<h1>性能以及调优</h1>
<ul>
<li><p>没有太多可以优化的地方</p>
</li>
<li><p>注意 <code class="remark-code">btrfs filesys show</code> 命令的输出!</p>
</li>
</ul>
<p>表明文件系统正在正常运行:</p>
<div class="small">
<pre><code class="remark-code"># btrfs filesys show
Label: none  uuid: 80b37641-4f4a-4694-968b-39b85c67b934
        Total devices 1 FS bytes used 4.20GiB
        devid    1 size 15.25GiB used 6.04GiB path /dev/xvdc</code></pre>
</div>
<p>下面这种情况是文件块全部占满的情况(没有空闲的文件块) 即使上面没有太多的数据信息：</p>
<div class="small">
<pre><code class="remark-code"># btrfs filesys show
Label: none  uuid: de060d4c-99b6-4da0-90fa-fb47166db38b
        Total devices 1 FS bytes used 2.51GiB
        devid    1 size 87.50GiB used 87.50GiB path /dev/xvdc</code></pre>
</div>
<div class="remark-slide-number">50 / 70</div></div></div></div></div><div class="remark-slide-container remark-visible"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>Overlay<span class="gray">fs</span></h1>
<div class="remark-slide-number">51 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>序</h1>
<p>为何将<span class="gray">fs</span>标记为灰色?</p>
<ul>
<li><p>它曾经被称为 <code class="remark-code">overlayfs</code></p>
</li>
<li><p>当并入到 3.18 版本之后, 名称就变为了 <code class="remark-code">overlay</code></p>
</li>
</ul>
<div class="remark-slide-number">52 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>原理</h1>
<ul>
<li><p>这个文件系统与AUFS很类似，只有很少的地方有差别:</p>
<ul>
<li><p>只有两个分支only two branches (被称为文件层("layers"))</p>
</li>
<li><p>但是分支只能进行自我覆盖</p>
</li>
</ul>
</li>
</ul>
<div class="remark-slide-number">53 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>在实际操作中</h1>
<ul>
<li><p>你需要内核版本为 3.18</p>
</li>
<li><p>在Ubuntu<span class="red">¹</span>上:</p>
<ul>
<li><p>go to <a href="http://kernel.ubuntu.com/~kernel-ppa/mainline/">http://kernel.ubuntu.com/~kernel-ppa/mainline/</a></p>
</li>
<li><p>locate the most recent directory, e.g. <code class="remark-code">v3.18.4-vidi</code></p>
</li>
<li><p>download the <code class="remark-code">linux-image-..._amd64.deb</code> file</p>
</li>
<li><p><code class="remark-code">dpkg -i</code> that file, reboot, enjoy</p>
</li>
</ul>
</li>
</ul>
<div class="footnote"><span class="red">¹</span>
对于其他发行版的适配工作就交给读者来完成
</div>
<div class="remark-slide-number">54 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>高级选项(Under the hood)</h1>
<ul>
<li><p>镜像以及容器在以下目录下被具体化
<br><code class="remark-code">/var/lib/docker/overlay/$ID_OF_CONTAINER_OR_IMAGE</code></p>
</li>
<li><p>镜像只有一个'root'子目录
<br>(包含了root FS)</p>
</li>
<li><p>容器含有:</p>
<ul>
<li><p><code class="remark-code">lower-id</code> → 文件包含镜像的ID </p>
</li>
<li><p><code class="remark-code">merged/</code> → 容器的挂载点(需要在运行的时候)</p>
</li>
<li><p><code class="remark-code">upper/</code> → 容器的读写层</p>
</li>
<li><p><code class="remark-code">work/</code> → 用于原子拷贝操作的临时的空间</p>
</li>
</ul>
</li>
</ul>
<div class="remark-slide-number">55 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><p><!-- # Example --></p>
<h1>性能以及调优Performance, tuning</h1>
<ul>
<li><p>目前阶段没有什么需要调优的地方</p>
</li>
<li><p>性能方面应该与AUFS比较类似:</p>
<ul>
<li><p>向上拷贝速度较慢</p>
</li>
<li><p>对内存资源的利用较好</p>
</li>
</ul>
</li>
<li><p>具体实现细节:
<br>同样的文件在不同镜像之间通过硬链接的方式连在一起
<br>(这样可以避免进行复杂的覆盖( avoids doing composed overlays))</p>
</li>
</ul>
<div class="remark-slide-number">56 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>VFS</h1>
<div class="remark-slide-number">57 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>原理</h1>
<ul>
<li><p>没有 copy on write 机制 Docker每次都要进行全部的拷贝!</p>
</li>
<li><p>并没有依赖于这些及为花哨的内核机</p>
</li>
<li><p>当将Docker移植到一个新的平台上的时候 这是一个不错的选择
<br>(think FreeBSD, Solaris...)</p>
</li>
<li><p>空间利用率低 速度慢 </p>
</li>
</ul>
<div class="remark-slide-number">58 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>在实际操作中</h1>
<ul>
<li><p>在产品安装的时候可能比较有用 </p>
<p>(如果你不想/不能 使用 存储卷，并且不想/不能使用任何 copy-on-write机制)</p>
</li>
</ul>
<div class="remark-slide-number">59 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>结论</h1>
<div class="remark-slide-number">60 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><p>关于Docker存储驱动，最棒的就是，用户可以有如此多的选择。</p>
<div class="remark-slide-number">61 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>哪种情况应该选择哪种文件系统？(What do, what do?)</h1>
<ul>
<li><p>如果你做的是PaaS或使用其他的密集环境(high-density environment):</p>
<ul>
<li><p>AUFS (要求内核提供对应的支持)</p>
</li>
<li><p>overlayfs (在其他的情况下)</p>
</li>
</ul>
</li>
<li><p>如果你把一个大的可写的文件放在CoW文件系统:</p>
<ul>
<li>BTRFS or Device Mapper (选择一个你最了解的)</li>
</ul>
</li>
</ul>
<div class="remark-slide-number">62 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>总而言之</h1>
<div class="remark-slide-number">63 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><p>在你的产品上
<br>最好的存储驱动 
<br>是你的团队有最多的实际操作经验的那一种</p>
<div class="remark-slide-number">64 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>特别内容(Bonus track)</h1>
<h2><code class="remark-code">discard</code> and <code class="remark-code">TRIM</code></h2>
<div class="remark-slide-number">65 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1><code class="remark-code">TRIM</code></h1>
<ul>
<li><p>发送给SSD硬盘的内容 告诉SSD硬盘Command sent to a SSD disk, to tell it:
<br>"这个存储块已经不在被使用了"</p>
</li>
<li><p>这个功能很有用 因为对于SSD来说 <em>erase</em>的代价非常高 (速度很慢)</p>
</li>
<li><p>允许SSD 来提前预先擦除cells
 <br>(并不是即时的 而是在 写操作之前)</p>
</li>
<li><p>这也对支持 copy-on-write 机制的存储有意义
<br>(如果/当 所有的镜像都作为一个trimmed block 那么它就可以被释放)</p>
</li>
</ul>
<div class="remark-slide-number">66 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1><code class="remark-code">discard</code></h1>
<ul>
<li><p>文件系统选择的含义:
<br><em>"can I has <code class="remark-code">TRIM</code> on this pls"</em></p>
</li>
<li><p>Can be enabled/disabled at any time</p>
</li>
<li><p>文件系统也可以使用<code class="remark-code">fstrim</code>通过手工地方式被修剪(be trimmed)
<br>(即使对于已经挂载了的文件系统)</p>
</li>
</ul>
<div class="remark-slide-number">67 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1><code class="remark-code">discard</code> 的困惑</h1>
<ul>
<li><p><code class="remark-code">discard</code> 在 Device Mapper + loopback devices 上工作</p>
</li>
<li><p>... 但是在 loopback devices 上速度特别慢
<br>(在容器或者镜像删除之后 loopback文件需要被"re-sparsified" 这是一个特别慢的操作)</p>
</li>
<li>你可以根据自己的偏好将其打开或者关闭</li>
</ul>
<div class="remark-slide-number">68 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content center middle hljs-default"><h1>以上就是全部的内容!</h1>
<div class="remark-slide-number">69 / 70</div></div></div></div></div><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>Questions?</h1>
<ul>
<li><p>To get those slides, follow me on twitter: <a href="https://twitter.com/jpetazzo">@jpetazzo</a>
<br><span class="small">Yes, this is a particularly evil scheme to increase my follower count</span></p>
</li>
<li><p>Also <span class="red">WE ARE HIRING!</span></p>
<ul>
<li><p>infrastructure (servers, metal, and stuff)</p>
</li>
<li><p>QA (get paid to break things!)</p>
</li>
<li><p>Python (Docker Hub and more)</p>
</li>
<li><p>Go (Docker Engine and more)</p>
</li>
</ul>
</li>
<li><p>Send your resume to jobs@docker.com 
<br><span class="gray">Do it do it do it NOW NOW!</span></p>
</li>
</ul>
<div class="remark-slide-number">70 / 70</div></div></div></div></div></div>
<div class="remark-preview-area"><div class="remark-slide-container"><div class="remark-slide-scaler" style="width: 908px; height: 681px; transform: scale(0); left: 0px; top: 0px;"><div class="remark-slide"><div class="remark-slide-content hljs-default"><h1>序</h1>
<p>为何将<span class="gray">fs</span>标记为灰色?</p>
<ul>
<li><p>它曾经被称为 <code class="remark-code">overlayfs</code></p>
</li>
<li><p>当并入到 3.18 版本之后, 名称就变为了 <code class="remark-code">overlay</code></p>
</li>
</ul>
<div class="remark-slide-number">52 / 70</div></div></div></div></div></div>
<div class="remark-backdrop"></div>
<div class="remark-help" style="width: 908px; height: 681px; transform: scale(1.0837); left: 226px; top: 0px;">
  <div class="remark-help-content">
    <h1>Help</h1>
    <p><b>Keyboard shortcuts</b></p>
    <table class="light-keys">
      <tbody><tr>
        <td>
          <span class="key"><b>↑</b></span>,
          <span class="key"><b>←</b></span>,
          <span class="key">Pg Up</span>,
          <span class="key">K</span>
        </td>
        <td>Go to previous slide</td>
      </tr>
      <tr>
        <td>
          <span class="key"><b>↓</b></span>,
          <span class="key"><b>→</b></span>,
          <span class="key">Pg Dn</span>,
          <span class="key">Space</span>,
          <span class="key">J</span>
        </td>
        <td>Go to next slide</td>
      </tr>
      <tr>
        <td>
          <span class="key">Home</span>
        </td>
        <td>Go to first slide</td>
      </tr>
      <tr>
        <td>
          <span class="key">End</span>
        </td>
        <td>Go to last slide</td>
      </tr>
      <tr>
        <td>
          <span class="key">F</span>
        </td>
        <td>Toggle fullscreen mode</td>
      </tr>
      <tr>
        <td>
          <span class="key">C</span>
        </td>
        <td>Clone slideshow</td>
      </tr>
      <tr>
        <td>
          <span class="key">P</span>
        </td>
        <td>Toggle presenter mode</td>
      </tr>
      <tr>
        <td>
          <span class="key">?</span>
        </td>
        <td>Toggle this help</td>
      </tr>
    </tbody></table>
  </div>
  <div class="content dismiss">
    <table class="light-keys">
      <tbody><tr>
        <td>
          <span class="key">Esc</span>
        </td>
        <td>Back to slideshow</td>
      </tr>
    </tbody></table>
  </div>
</div>

  


</body></html>